webpackJsonp([5],{"5/eI":function(e,t,o){var a=o("HlC6");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o("rjj0")("efb9ab62",a,!0)},"As+P":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"layout-container con-f"},[o("el-container",[o("el-aside",{staticClass:"asideBox",style:e.treeHeight,attrs:{width:"240px"}},[o("el-tree",{ref:"trees",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","highlight-current":!0,"expand-on-click-node":!1,"default-expanded-keys":[e.nowOrgObj.id]},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),o("el-main",{staticClass:"pageMain"},[o("el-row",{staticClass:"topBanner"},[o("el-col",{attrs:{span:24}},[o("span",{staticClass:"blue"},[e._v("当前选择："+e._s(e.nowOrgObj.depName))])])],1),e._v(" "),o("div",{staticClass:"model-search clearfix"},[o("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"姓名/手机号码"},nativeOn:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchParam(t)}},model:{value:e.formData.nameOrMobile,callback:function(t){e.$set(e.formData,"nameOrMobile",t)},expression:"formData.nameOrMobile"}}),e._v(" "),o("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},nativeOn:{click:function(t){e.searchParam(t)}}},[e._v("查询")]),e._v(" "),o("el-button",{attrs:{plain:"",size:"small",icon:"el-icon-remove-outline"},nativeOn:{click:function(t){e.clearForm(t)}}},[e._v("清空")]),e._v(" "),o("el-button",{staticClass:"right",attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},nativeOn:{click:function(t){e.handleApply(t)}}},[e._v("新增试岗账号")])],1),e._v(" "),o("GridUnit",{ref:"refGridUnit",attrs:{columns:e.colModels,url:e.url,listField:"data.result",autoLoad:!1,dataMethod:e.method,formOptions:e.formData,height:e.tableHeight},scopedSlots:e._u([{key:"handle",fn:function(t){return[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(o){e.editAccount(t.row)}}},[e._v("\n            编辑\n          ")]),e._v(" "),1==t.row.isDelete?o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){e.backAccount(t.row)}}},[e._v("\n              复职\n            ")]):o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){e.leaveAccount(t.row)}}},[e._v("\n              离职\n            ")])]}},{key:"roleTmp",fn:function(t){return[e._v("\n          "+e._s(e._f("roleStr")(t.row.role))+"\n        ")]}},{key:"accountType",fn:function(t){return[1==t.row.type?o("el-tag",[e._v("正式")]):0==t.row.activityStatus?o("div",{staticClass:"underline colorRed",on:{click:function(o){e.changeAccountType(t.row)}}},[e._v("试用中")]):o("div",{staticClass:"underline colorInfo",on:{click:function(o){e.changeAccountType(t.row)}}},[e._v("已失效")])]}}])})],1)],1),e._v(" "),o("div",{staticClass:"dialog-info"},[o("el-dialog",{attrs:{title:e.isEditAccount?"编辑试岗账号":"新增试岗账号",visible:e.layer_account,width:"800px","close-on-click-modal":!1},on:{close:e.closeAccount,"update:visible":function(t){e.layer_account=t}}},[o("el-form",{ref:"accountForm",attrs:{size:"small",model:e.accountForm,rules:e.rules,"label-position":"right","label-width":"100px"}},[o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[o("el-input",{model:{value:e.accountForm.mobile,callback:function(t){e.$set(e.accountForm,"mobile",t)},expression:"accountForm.mobile"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"姓名",prop:"name"}},[o("el-input",{attrs:{maxlength:"10"},model:{value:e.accountForm.name,callback:function(t){e.$set(e.accountForm,"name",t)},expression:"accountForm.name"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"性别",prop:"sex"}},[o("el-select",{model:{value:e.accountForm.sex,callback:function(t){e.$set(e.accountForm,"sex",t)},expression:"accountForm.sex"}},e._l(e.genderOpts,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"所属部门",prop:"depName"}},[o("el-select",{staticStyle:{width:"100%"},model:{value:e.accountForm.depName,callback:function(t){e.$set(e.accountForm,"depName",t)},expression:"accountForm.depName"}},[o("el-tree",{ref:"overlayTree",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","highlight-current":!0,"expand-on-click-node":!1,"default-expanded-keys":[e.nowOrgObj.id]},on:{"node-click":e.overlayNodeClick}}),e._v(" "),o("el-option",{staticStyle:{display:"none"},attrs:{value:""}})],1)],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"权限角色",prop:"role"}},[o("el-select",{staticStyle:{width:"100%"},model:{value:e.accountForm.role,callback:function(t){e.$set(e.accountForm,"role",t)},expression:"accountForm.role"}},e._l(e.roleOpts,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"手机编码",prop:"imei"}},[o("el-input",{model:{value:e.accountForm.imei,callback:function(t){e.$set(e.accountForm,"imei",t)},expression:"accountForm.imei"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"失效时间",prop:"gmtExpire"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","default-time":"23:59:59","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,placeholder:"失效时间"},model:{value:e.accountForm.gmtExpire,callback:function(t){e.$set(e.accountForm,"gmtExpire",t)},expression:"accountForm.gmtExpire"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"身份证号码",prop:"idNo"}},[o("el-input",{attrs:{disabled:e.isEditAccount},model:{value:e.accountForm.idNo,callback:function(t){e.$set(e.accountForm,"idNo",t)},expression:"accountForm.idNo"}})],1)],1)],1)],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEditAccount,expression:"!isEditAccount"}],staticStyle:{"padding-left":"27px"}},[e._v("温馨提示：默认密码为123456，请提醒用户首次登陆后立即更改密码")]),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){e.layer_account=!1}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.submitForm("accountForm")}}},[e._v("确定")])],1)],1)],1),e._v(" "),o("Incumbency",{ref:"incumbency",on:{searchStart:e.searchParam}})],1)},staticRenderFns:[]}},HlC6:function(e,t,o){(e.exports=o("FZ+f")(!1)).push([e.i,".layout-container .pageMain{padding:0 20px}.asideBox{border:1px solid #ddd;height:100%}.filter-item{margin-left:10px}.pageMain{padding:0 20px}.topBanner{border:1px solid #ccc;padding:10px}.topBanner .blue{color:#409eff;font-weight:700;line-height:28px}.model-search{padding:10px 0}.underline{text-decoration:underline;cursor:pointer}.colorRed{color:#f56c6c}.colorInfo{color:#909399}.grid-content{width:100%;height:360px;border:1px solid #ccc}.grid-content .topTitle{width:100%;height:30px;line-height:30px;text-align:center;border-bottom:1px solid #ccc;background:#eee}.grid-content .contentNav{width:100%;height:330px;overflow:auto}.grid-content .contentNav li{width:100%;height:30px;line-height:30px;padding-left:10px}.grid-content .contentNav .current{background:#eee}",""])},Is3h:function(e,t,o){var a=o("VU/8")(o("OWDB"),o("As+P"),function(e){o("5/eI")},null,null);e.exports=a.exports},OWDB:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("cAgV"),n=o("U4Ig"),r=o.n(n),i=o("E4LH"),c=o("0xDb"),l=o("LIsc"),s=o.n(l),u=o("+MD4"),d=[{value:2,label:"城市管家"},{value:3,label:"组长"}];t.default={name:"probation",directives:{waves:a.a},components:{GridUnit:r.a,Incumbency:s.a},created:function(){var e=this,t=document.body.clientHeight-230;this.tableHeight=t>300?t:300,window.onresize=function(){return t=document.body.clientHeight-230,void(e.tableHeight=e.tableHeight=t>300?t:300)},this.defaultAccount=Object(c.b)(this.accountForm),this.getTree()},computed:{treeHeight:function(){return{height:this.tableHeight+104+"px"}}},data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()}},rules:{depName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],mobile:[{required:!0,trigger:"blur",validator:function(e,t,o){Object(i.a)(t)?o():o(new Error("请输入正确的手机号"))}}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],role:[{required:!0,message:"请选择权限角色",trigger:"change"}],imei:[{required:!0,message:"请输入手机编码",trigger:"blur"}],gmtExpire:[{required:!0,message:"请选择失效时间",trigger:"change"}],gmtHire:[{required:!0,message:"请选择入职时间",trigger:"change"}],idNo:[{required:!0,trigger:"blur",validator:function(e,t,o){Object(i.b)(t)?o():o(new Error("请输入正确的身份证号码"))}}]},defaultProps:{children:"child",label:"depName"},treeData:[],genderOpts:[{value:1,label:"男"},{value:2,label:"女"}],roleOpts:d,formData:{nameOrMobile:"",depId:"",isDelete:0,type:0},nowOrgObj:{depName:"",id:""},tableHeight:300,accountForm:{mobile:"",name:"",sex:1,depId:"",depName:"",role:"",imei:"",type:0,idNo:"",gmtExpire:""},defaultAccount:{},isEditAccount:!1,layer_account:!1,colModels:[{prop:"name",label:"姓名"},{prop:"depName",label:"部门"},{prop:"role",label:"权限角色",slotName:"roleTmp"},{prop:"mobile",label:"手机号码"},{prop:"imei",label:"手机编码"},{prop:"gmtExpire",label:"失效时间"},{label:"操作",slotName:"handle",width:200},{prop:"createName",label:"创建人"},{prop:"gmtCreate",label:"创建时间"}],url:"/user/managerList",method:"managerList"}},filters:{roleStr:function(e){var t="";return d.map(function(o){o.value===e&&(t=o.label)}),t||"未知角色"}},watch:{nowOrgObj:function(e){this.accountForm.depName=e.depName,this.accountForm.depId=e.id}},methods:{backAccount:function(e){this.$refs.incumbency.open(e)},leaveAccount:function(e){this.$refs.incumbency.open(e)},getList:function(){},getTree:function(e){var t=this;Object(u.k)().then(function(o){if(o.data&&o.data instanceof Array){t.treeData=o.data;var a=e||t.treeData[0].id;t.getFirstNode(a)}}).catch(function(e){})},getFirstNode:function(e){var t=this;this.$nextTick(function(){t.$refs.trees.setCurrentKey(e);var o=t.$refs.trees.getNode(e);t.nowOrgObj=Object(c.b)(o.data),t.formData.depId=t.nowOrgObj.id,t.$nextTick(function(){t.searchParam()})})},handleNodeClick:function(e,t){var o=this;this.nowOrgObj=Object(c.b)(t.data),this.formData.depId=this.nowOrgObj.id,this.$nextTick(function(){o.searchParam()})},searchParam:function(){this.$refs.refGridUnit.searchHandler()},clearForm:function(){this.formData.nameOrMobile="",this.$refs.refGridUnit.searchHandler()},handleApply:function(){var e=this;this.layer_account=!0,this.isEditAccount=!1,this.$nextTick(function(){e.$refs.overlayTree.setCurrentKey(e.nowOrgObj.id)})},overlayNodeClick:function(e,t){this.accountForm.depName=t.data.depName,this.accountForm.depId=t.data.id},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=Object(c.b)(t.accountForm),a=u.c;t.isEditAccount&&(a=u.t),delete o.depName,a(o).then(function(e){t.layer_account=!1,t.$message.success((t.isEditAccount?"编辑":"新增")+"账号成功"),t.searchParam()}).catch(function(e){})})},editAccount:function(e){var t=this;for(var o in this.accountForm)this.accountForm[o]=e[o];this.accountForm.id=e.id,this.layer_account=!0,this.isEditAccount=!0,this.$nextTick(function(){t.$refs.overlayTree.setCurrentKey(t.accountForm.depId)})},delAccount:function(e){var t=this;this.$confirm("确定删除账号'"+e.name+"'吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then(function(){var o={id:e.id};Object(u.e)(o).then(function(e){t.$message.success("删除账号成功"),t.searchParam()}).catch(function(e){})}).catch(function(){})},closeAccount:function(){this.$refs.accountForm.resetFields(),this.accountForm=Object(c.b)(this.defaultAccount)}}}},XZlg:function(e,t,o){(e.exports=o("FZ+f")(!1)).push([e.i,".waves-ripple{position:absolute;border-radius:100%;background-color:rgba(0,0,0,.15);background-clip:padding-box;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);opacity:1}.waves-ripple.z-active{opacity:0;-webkit-transform:scale(2);-ms-transform:scale(2);transform:scale(2);-webkit-transition:opacity 1.2s ease-out,-webkit-transform .6s ease-out;transition:opacity 1.2s ease-out,-webkit-transform .6s ease-out;transition:opacity 1.2s ease-out,transform .6s ease-out;transition:opacity 1.2s ease-out,transform .6s ease-out,-webkit-transform .6s ease-out}",""])},cAgV:function(e,t,o){"use strict";var a=o("woOf"),n=o.n(a),r=(o("ctMr"),{bind:function(e,t){e.addEventListener("click",function(o){var a=n()({},t.value),r=n()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),i=r.ele;if(i){i.style.position="relative",i.style.overflow="hidden";var c=i.getBoundingClientRect(),l=i.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":((l=document.createElement("span")).className="waves-ripple",l.style.height=l.style.width=Math.max(c.width,c.height)+"px",i.appendChild(l)),r.type){case"center":l.style.top=c.height/2-l.offsetHeight/2+"px",l.style.left=c.width/2-l.offsetWidth/2+"px";break;default:l.style.top=o.pageY-c.top-l.offsetHeight/2-document.body.scrollTop+"px",l.style.left=o.pageX-c.left-l.offsetWidth/2-document.body.scrollLeft+"px"}return l.style.backgroundColor=r.color,l.className="waves-ripple z-active",!1}},!1)}}),i=function(e){e.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(i)),r.install=i;t.a=r},ctMr:function(e,t,o){var a=o("XZlg");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o("rjj0")("44fae30e",a,!0)}});