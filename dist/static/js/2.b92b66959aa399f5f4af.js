webpackJsonp([2],{"7MTf":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("c/Tr"),n=a.n(i),r=a("Gu7T"),o=a.n(r),l=a("pFYg"),s=a.n(l),c=a("bOdI"),d=a.n(c),u=a("woOf"),p=a.n(u),m=a("7+uW"),f={height:[String,Number],maxHeight:[String,Number],stripe:{type:Boolean,default:!0},border:Boolean,size:{type:String,default:"small"},fit:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},currentRowKey:[String,Number],rowClassName:[String,Function],rowStyle:[String,Function],rowKey:[String,Function],emptyText:String,defaultExpandAll:Boolean,expandRowKeys:Array,defaultSort:Object,tooltipEffect:String,showSummary:Boolean,sumText:String,summaryMethod:Function,url:{type:String},method:{type:String,default:"post",validator:function(e){return-1!==["get","post","put","delete"].indexOf(e.toLowerCase())}},dataMethod:{type:String},headers:{type:Object,default:function(){return{}}},showRowIndex:{type:Boolean,default:!0},showSelection:{type:Boolean,default:!1},showExpand:{type:Boolean,default:!1},listField:{type:String,default:"data.data"},totalField:{type:String,default:"data.total"},params:{type:Object,default:function(){return{}}},formOptions:{type:Object,default:function(){return{}}},autoLoad:{type:Boolean,default:!0},type:{type:String,default:"remote",validator:function(e){var t=-1!==["remote","local"].indexOf(e);return t||(this.$message.error("不支持'"+e+"', 请设置remote或local（local我是不支持的，不要问我为什么，有需要找我来呀）."),!1)}},data:{type:Array},dataHandler:{type:Function},columns:{type:Array,required:!0,columnKey:String,label:{type:String,required:!0},prop:{type:String,required:!0},width:{type:[Number,String],default:"auto"},minWidth:{type:Number,default:100},fixed:[Boolean,String],renderHeader:Function,sortable:[Boolean,String],sortMethod:Function,resizable:Boolean,formatter:Function,showOverflowTooltip:{type:Boolean,default:!0},align:{type:String,default:"left"},headerAlign:String,className:{type:String,default:""},labelClassName:{type:String,default:""},selectable:Function,reserveSelection:Boolean,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterMethod:Function,filteredValue:Array,filter:{type:String},render:{type:Function},slotName:{type:String}},expandColums:{type:Array,default:function(){return[]}},showPagination:{type:Boolean,default:!0},pagenationBg:{type:Boolean,default:!0},pageSizes:{type:Array,default:function(){return[20,30,50]}},paginationLayout:{type:String,default:"total, sizes, prev, pager, next, jumper"},pageNoKey:{type:String,default:"pageNo"},pageSizeKey:{type:String,default:"pageSize"}},h=a("Vo7i"),g=a("0xDb");t.default={name:"fht-table-pagination",components:{},props:f,data:function(){return{Vue:m.default,pagination:{pageNo:1,pageSize:20},total:0,loading:!1,tableData:[],searchParams:{}}},computed:{},methods:{previewImage:function(e){if(!e)return!1;var t={src:e},a=new Image;a.src=e,a.onload=function(){t.w=a.width||800,t.h=a.height||600,m.default.$preview.open(0,[t])}},handleSizeChange:function(e){this.pagination.pageSize=e,this.fetchHandler()},handleCurrentChange:function(e){this.pagination.pageNo=e,this.fetchHandler()},searchHandler:function(){this.pagination.pageNo=1,this.fetchHandler()},fetchHandler:function(){var e=this;this.loading=!0;var t,a=void 0,i=this.url,n=this.dataMethod,r=this.listField,o=this.pageNoKey,l=this.pageSizeKey,c=this.totalField,u=this.showPagination,m=this.pagination;(a=Object(g.a)(Object(g.b)(this.searchParams)),u)&&(a=p()(a,(t={},d()(t,o,m.pageNo),d()(t,l,m.pageSize),t)));if(!h.a)return this.$message.error("请联系柏林如何在Grid组件中使用axios请求"),this.loading=!1,!1;Object(h.a)(i,{method:n,params:a}).then(function(t){var a=t;if(!t||t instanceof Array||(r&&-1!==r.indexOf(".")?r.split(".").forEach(function(e){a=a[e]}):a=t[r]),!(a&&a instanceof Array))return e.$message.error(r+"必须是Array哦. 后端童鞋注意下"),e.loading=!1,!1;e.dataHandler?e.tableData=a.map(e.dataHandler):e.tableData=a;var i=t;"[object Array]"===Object.prototype.toString.call(t)?i=t.length:"object"===(void 0===t?"undefined":s()(t))?c&&-1!==c.indexOf(".")?c.split(".").forEach(function(e){i=i[e]}):i=t[c]:i=0,e.total=i,e.loading=!1}).catch(function(t){console.log(t),e.loading=!1})},emitEventHandler:function(e){this.$emit.apply(this,[e].concat(o()(n()(arguments).slice(1))))}},mounted:function(){var e=this;this.$refs.gridUnit.$on("expand-change",function(t,a){return e.emitEventHandler("expand-change",t,a)});var t=this.type,a=this.autoLoad,i=this.formOptions,n=this.params;"remote"===t&&a&&(this.searchParams=i?p()(i,n):n,this.fetchHandler())},watch:{formOptions:{handler:function(e){this.searchParams=p()(e,this.params)},deep:!0},params:{handler:function(e){this.searchParams=p()(e,this.params)},deep:!0}}}},"9bBU":function(e,t,a){a("mClu");var i=a("FeBl").Object;e.exports=function(e,t,a){return i.defineProperty(e,t,a)}},C4MV:function(e,t,a){e.exports={default:a("9bBU"),__esModule:!0}},CEd8:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model-table-pagenation"},[a("div",{staticClass:"model-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.loading,expression:"loading",modifiers:{lock:!0}}],ref:"gridUnit",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:e.border,stripe:e.stripe,height:e.height,"max-height":e.maxHeight,fit:e.fit,size:e.size,"show-header":e.showHeader,"highlight-current-row":e.highlightCurrentRow,"current-row-key":e.currentRowKey,"row-class-name":e.rowClassName,"row-style":e.rowStyle,"row-ket":e.rowKey,"empty-text":e.emptyText,"default-expand-all":e.defaultExpandAll,"expand-row-keys":e.expandRowKeys,"default-sort":e.defaultSort,"tooltip-effect":e.tooltipEffect,"show-summary":e.showSummary,"sum-text":e.sumText,"summary-method":e.summaryMethod},on:{select:function(t,a){return e.emitEventHandler("select",t,a)},"select-all":function(t){return e.emitEventHandler("select-all",t)},"selection-change":function(t){return e.emitEventHandler("selection-change",t)},"cell-mouse-enter":function(t,a,i,n){return e.emitEventHandler("cell-mouse-enter",t,a,i,n)},"cell-mouse-leave":function(t,a,i,n){return e.emitEventHandler("cell-mouse-leave",t,a,i,n)},"cell-click":function(t,a,i,n){return e.emitEventHandler("cell-click",t,a,i,n)},"cell-dblclick":function(t,a,i,n){return e.emitEventHandler("cell-dblclick",t,a,i,n)},"row-click":function(t,a,i){return e.emitEventHandler("row-click",t,a,i)},"row-dblclick":function(t,a){return e.emitEventHandler("row-dblclick",t,a)},"row-contextmenu":function(t,a){return e.emitEventHandler("row-contextmenu",t,a)},"header-click":function(t,a){return e.emitEventHandler("header-click",t,a)},"sort-change":function(t){return e.emitEventHandler("sort-change",t)},"filter-change":function(t){return e.emitEventHandler("filter-change",t)},"current-change":function(t,a){return e.emitEventHandler("current-change",t,a)},"header-dragend":function(t,a,i,n){return e.emitEventHandler("header-dragend",t,a,i,n)},"expand-change":function(t,a){return e.emitEventHandler("expand-change",t,a)}}},[e.showRowIndex?a("el-table-column",{attrs:{type:"index",width:"40",align:"center"}}):e._e(),e._v(" "),e.showExpand?a("el-table-column",{attrs:{type:"expand",width:"40"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",size:"small",inline:""}},e._l(e.expandColums,function(i,n){return a("el-form-item",{key:n,attrs:{label:i.label}},[a("span",[e._v(e._s(t.row[i.prop]))])])}))]}}])}):e._e(),e._v(" "),e.showSelection?a("el-table-column",{attrs:{type:"selection",width:"40"}}):e._e(),e._v(" "),e._l(e.columns,function(t,i){return a("el-table-column",{key:i,attrs:{"column-key":t.columnKey,prop:t.prop,label:t.label,width:t.minWidth?"-":t.width||"auto",minWidth:t.minWidth||t.width||100,fixed:t.fixed,"render-header":t.renderHeader,sortable:t.sortable,"sort-method":t.method,resizable:t.resizable,formatter:t.formatter,"show-overflow-tooltip":t.showOverflowTooltip||!0,align:t.align||"left","header-align":t.headerAlign||t.align,"class-name":t.className,"label-class-name":t.labelClassName,selectable:t.selectable,"reserve-selection":t.reserveSelection,filters:t.filters,"filter-placement":t.filterPlacement,"filter-multiple":t.filterMultiple,"filter-method":t.filterMethod,"filtered-value":t.filteredValue},scopedSlots:e._u([{key:"default",fn:function(i){return[t.filter?a("span",["parseTime"===t.filter&&i.row[t.prop]&&""!=i.row[t.prop]?a("i",{staticClass:"el-icon-time"}):e._e(),e._v("\n            "+e._s(e.Vue.filter(t.filter)(i.row[t.prop]))+"\n          ")]):"img"===t.type?a("div",{staticStyle:{display:"flex"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i.row[t.prop],expression:"scope.row[column.prop]"}],staticClass:"image preview-img image-center",attrs:{width:"40",height:"40"},on:{click:function(a){e.previewImage(i.row[t.prop])}}})]):"link"===t.type?a("a",{staticStyle:{color:"#409eff"},attrs:{href:i.row[t.prop],target:"_blank"}},[e._v("\n            "+e._s(i.row[t.prop])+"\n          ")]):"status"===t.type&&t.unitFilters?a("el-tag",{attrs:{type:t.unitFilters.renderStatusType(i.row[t.prop])}},[e._v("\n            "+e._s(t.unitFilters.renderStatusValue(i.row[t.prop]))+"\n          ")]):t.slotName?a("span",[e._t(t.slotName,null,{row:i.row,$index:i.$index})],2):a("span",[e._v("\n            "+e._s(t.render?t.render(i.row):i.row[t.prop])+"\n          ")])]}}])})})],2)],1),e._v(" "),e.showPagination?a("div",{staticClass:"model-pagenation"},[a("el-pagination",{attrs:{background:e.pagenationBg,"current-page":e.pagination.pageNo,"page-sizes":e.pageSizes,"page-size":e.pagination.pageSize,layout:e.paginationLayout,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()])},staticRenderFns:[]}},OzbZ:function(e,t,a){var i=a("qSzc");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("366d5382",i,!0)},U4Ig:function(e,t,a){var i=a("VU/8")(a("7MTf"),a("CEd8"),function(e){a("OzbZ")},null,null);e.exports=i.exports},XZlg:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,".waves-ripple{position:absolute;border-radius:100%;background-color:rgba(0,0,0,.15);background-clip:padding-box;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);opacity:1}.waves-ripple.z-active{opacity:0;-webkit-transform:scale(2);-ms-transform:scale(2);transform:scale(2);-webkit-transition:opacity 1.2s ease-out,-webkit-transform .6s ease-out;transition:opacity 1.2s ease-out,-webkit-transform .6s ease-out;transition:opacity 1.2s ease-out,transform .6s ease-out;transition:opacity 1.2s ease-out,transform .6s ease-out,-webkit-transform .6s ease-out}",""])},bOdI:function(e,t,a){"use strict";t.__esModule=!0;var i,n=a("C4MV"),r=(i=n)&&i.__esModule?i:{default:i};t.default=function(e,t,a){return t in e?(0,r.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},cAgV:function(e,t,a){"use strict";var i=a("woOf"),n=a.n(i),r=(a("ctMr"),{bind:function(e,t){e.addEventListener("click",function(a){var i=n()({},t.value),r=n()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),o=r.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var l=o.getBoundingClientRect(),s=o.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":((s=document.createElement("span")).className="waves-ripple",s.style.height=s.style.width=Math.max(l.width,l.height)+"px",o.appendChild(s)),r.type){case"center":s.style.top=l.height/2-s.offsetHeight/2+"px",s.style.left=l.width/2-s.offsetWidth/2+"px";break;default:s.style.top=a.pageY-l.top-s.offsetHeight/2-document.body.scrollTop+"px",s.style.left=a.pageX-l.left-s.offsetWidth/2-document.body.scrollLeft+"px"}return s.style.backgroundColor=r.color,s.className="waves-ripple z-active",!1}},!1)}}),o=function(e){e.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(o)),r.install=o;t.a=r},ctMr:function(e,t,a){var i=a("XZlg");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("44fae30e",i,!0)},hfW0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("cAgV"),n=a("U4Ig"),r=a.n(n),o=a("E4LH"),l=a("0xDb"),s=a("LIsc"),c=a.n(s),d=a("+MD4"),u=[{value:1,label:"城市内勤"},{value:2,label:"城市管家"},{value:3,label:"组长"},{value:4,label:"站长"},{value:5,label:"板块经理"},{value:6,label:"区域经理"},{value:7,label:"城市总"},{value:8,label:"人事"},{value:9,label:"运营"},{value:11,label:"BD"}];t.default={name:"framework",directives:{waves:i.a},components:{GridUnit:r.a,Incumbency:c.a},created:function(){var e=this,t=document.body.clientHeight-230;this.tableHeight=t>300?t:300,window.onresize=function(){return t=document.body.clientHeight-230,void(e.tableHeight=t>300?t:300)},this.defaultAccount=Object(l.b)(this.accountForm),this.getTree(),this.getroleOptsList()},computed:{treeHeight:function(){return{height:this.tableHeight+104+"px"}}},data:function(){return{editParentId:null,hightOrganList:[],nowheightObj:{},IncumbencyList:[{value:null,label:"全部"},{value:0,label:"在职"},{value:1,label:"离职"}],InserviceList:[{value:0,label:"试用"},{value:1,label:"正式"},{value:2,label:"已失效"},{value:null,label:"全部"}],editAdd:!0,pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()}},rules:{depName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],mobile:[{required:!0,trigger:"blur",validator:function(e,t,a){Object(o.a)(t)?a():a(new Error("请输入正确的手机号"))}}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],role:[{required:!0,message:"请选择权限角色",trigger:"change"}],imei:[{required:!0,message:"请输入手机编码",trigger:"blur"}],gmtExpire:[{required:!0,message:"请选择失效时间",trigger:"change"}],gmtHire:[{required:!0,message:"请选择入职时间",trigger:"blur"}],idNo:[{required:!0,trigger:"blur",validator:function(e,t,a){Object(o.b)(t)?a():a(new Error("请输入正确的身份证号码"))}}]},defaultProps:{children:"child",label:"depName"},treeData:[],cityIndex:0,areaIndex:0,cityData:[],genderOpts:[{value:1,label:"男"},{value:2,label:"女"}],rowData:{},roleOpts:[],formData:{nameOrMobile:"",depId:"",type:null,isDelete:0},nowOrgObj:{depName:"",id:""},parentOrg:{depName:"",id:""},tableHeight:300,layer_addOrg:!1,layer_house:!1,layer_accountType:!1,superiorName:"",orgForm:{depName:""},accountForm:{mobile:"",name:"",sex:1,depId:"",depName:"",role:"",imei:"",type:1,gmtHire:"",idNo:""},isTry:!1,accoutTypeStatus:1,typeForm:{mobile:"",imei:"",gmtHire:""},typeForm2:{gmtExpire:""},defaultAccount:{},isEditOrg:!1,isEditAccount:!1,layer_account:!1,colModels:[{prop:"name",label:"姓名",width:100},{prop:"depName",label:"部门"},{prop:"roleName",label:"权限角色",slotName:"roleTmp",width:100},{prop:"mobile",label:"手机号码",width:100},{prop:"imei",label:"手机编码"},{prop:"type",label:"类型",slotName:"accountType",width:80},{label:"操作",slotName:"handle",width:320},{prop:"gmtCreate",label:"创建时间"}],url:"/user/managerList",method:"managerList"}},filters:{roleStr:function(e){var t="";return u.map(function(a){a.value===e&&(t=a.label)}),t||"未知角色"}},methods:{getroleOptsList:function(){var e=this;Object(d.o)().then(function(t){e.roleOpts=t.data})},exportExcel:function(){var e=null!==this.formData.type?this.formData.type:"",t="https://flying-api.mdguanjia.com/back/user/exportExcel?isDelete="+(null!==this.formData.isDelete?this.formData.isDelete:"")+"&type="+e+"&nameOrMobile="+this.formData.nameOrMobile+"&depId="+this.formData.depId,a=document.createElement("a");a.style.display="none",console.log(t),a.href=encodeURI(t),document.body.appendChild(a),a.click(),document.body.removeChild(a)},backAccount:function(e){this.$refs.incumbency.open(e)},leaveAccount:function(e){this.$refs.incumbency.open(e)},getTree:function(e,t){var a=this;Object(d.k)().then(function(i){if(i.data&&i.data instanceof Array){console.log(i.data),a.treeData=i.data;var n=e||a.treeData[0].id;a.getFirstNode(n),t&&a.$nextTick(function(){t()})}}).catch(function(e){})},dataFomart:function(){this.cityData.map(function(e){var t=[],a=[];e.childrens.map(function(e){var i=[];e.childrens.map(function(e){e.checked&&i.push(e)}),i.length===e.childrens.length?(e.checked=!0,e.indeterminate=!1,t.push(e)):(e.checked=!1,e.indeterminate=i.length>0,e.indeterminate&&a.push(e))}),t.length===e.childrens.length?(e.checked=!0,e.indeterminate=!1):(e.checked=!1,e.indeterminate=t.length>0||a.length>0)})},getFirstNode:function(e){var t=this;this.$nextTick(function(){t.$refs.trees.setCurrentKey(e);var a=t.$refs.trees.getNode(e);t.nowOrgObj=Object(l.b)(a.data),t.parentOrg=a.parent.data instanceof Array?Object(l.b)(a.parent.data[0]):Object(l.b)(a.parent.data),t.formData.depId=t.nowOrgObj.id,t.$nextTick(function(){t.searchParam()})})},handleNodeClick:function(e,t){var a=this;this.nowOrgObj=Object(l.b)(t.data),this.parentOrg=t.parent.data instanceof Array?Object(l.b)(t.parent.data[0]):Object(l.b)(t.parent.data),this.formData.depId=this.nowOrgObj.id,this.formData.nameOrMobile="",this.$nextTick(function(){a.searchParam()})},assignHouse:function(){var e=this,t={depId:this.nowOrgObj.id,parentDepId:this.parentOrg.id||0};Object(d.j)(t).then(function(t){t.data&&t.data instanceof Array?(e.cityData=t.data,e.dataFomart(),e.layer_house=!0):e.$message.error("未查询到可分配的房源")}).catch(function(e){})},houseClose:function(){this.cityIndex=0,this.areaIndex=0},addOrg:function(){this.isEditOrg=!1,this.layer_addOrg=!0,this.superiorName=this.nowOrgObj.depName},editOrg:function(){this.isEditOrg=!0,this.superiorName=this.parentOrg.depName,this.editParentId=this.parentOrg.id,this.orgForm.depName=this.nowOrgObj.depName,this.layer_addOrg=!0},editNodeclick:function(e,t){this.parentOrg.depName=t.data.depName,this.editParentId=t.data.id,this.superiorName=this.parentOrg.depName},submitOrg:function(){var e=this;this.$refs.orgForm.validate(function(t){if(!t)return!1;var a=Object(l.b)(e.orgForm),i=d.b;if(e.isEditOrg)for(a.depId=e.nowOrgObj.id,a.parentId=e.editParentId,i=d.s;a.parentId===a.depId;)return e.$message({message:"请选择除自己之外的其他部门",type:"error"}),!1;else a.parentId=e.nowOrgObj.id;console.log(a),i(a).then(function(t){e.layer_addOrg=!1,e.isEditOrg?(e.$message.success("编辑部门成功"),e.getTree(e.nowOrgObj.id)):e.$confirm("部门创建成功，请为部门分配房源","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){e.getTree(t.data.id,e.assignHouse)}).catch(function(){e.getTree(e.nowOrgObj.id)})}).catch(function(e){})})},delOrg:function(){var e=this;this.$confirm("确定删除部门 ‘"+this.nowOrgObj.depName+"’ 吗? 删除前请先确保部门旗下无员工","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={depId:e.nowOrgObj.id};Object(d.d)(t).then(function(t){e.$message.success("删除部门成功"),e.getTree(e.parentOrg.id)}).catch(function(e){})}).catch(function(){})},layerClose:function(){this.$refs.orgForm.resetFields(),this.orgForm.depName=""},searchParam:function(){this.$refs.refGridUnit.searchHandler()},clearForm:function(){this.formData.nameOrMobile="",this.$refs.refGridUnit.searchHandler()},handleApply:function(){var e=this;this.editAdd=!1,this.layer_account=!0,this.isEditAccount=!1,this.isTry=!1,this.accountForm=Object(l.b)(this.defaultAccount),this.accountForm.depId=this.nowOrgObj.id,this.accountForm.depName=this.nowOrgObj.depName,this.$nextTick(function(){e.$refs.overlayTree.setCurrentKey(e.nowOrgObj.id)})},overlayNodeClick:function(e,t){this.accountForm.depName=t.data.depName,this.accountForm.depId=t.data.id},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=Object(l.b)(t.accountForm),i=d.c;t.isEditAccount&&(i=d.t,t.isTry&&(a.type=0)),delete a.depName,i(a).then(function(e){t.layer_account=!1,t.$message.success((t.isEditAccount?"编辑":"新增")+"账号成功"),t.searchParam()}).catch(function(e){})})},editAccount:function(e){var t=this;for(var a in this.editAdd=!0,this.defaultAccount)this.accountForm[a]=e[a];0===e.type?(this.$set(this.accountForm,"gmtExpire",e.gmtExpire),this.isTry=!0):this.isTry=!1,this.accountForm.id=e.id,this.layer_account=!0,this.isEditAccount=!0,this.$nextTick(function(){t.$refs.overlayTree.setCurrentKey(t.accountForm.depId)})},resetPsd:function(e){var t=this;this.$confirm("<div>确定将账号'"+e.name+'\'的密码重置为 <span style="color: red">123456</span> 吗？',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then(function(){var a={id:e.id,password:"123456"};Object(d.n)(a).then(function(e){t.$message.success("重置密码成功"),t.searchParam()}).catch(function(e){})}).catch(function(){})},delAccount:function(e){var t=this;this.$confirm("确定删除账号'"+e.name+"'吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then(function(){var a={id:e.id};Object(d.e)(a).then(function(e){t.$message.success("删除账号成功"),t.searchParam()}).catch(function(e){})}).catch(function(){})},closeAccount:function(){this.$refs.accountForm.resetFields()},changeAccountType:function(e){this.layer_accountType=!0,this.rowData=e},close_accountType:function(){this.clearTypeValidate()},accountTypeSub:function(){var e=this;if(2===this.accoutTypeStatus){this.postType({type:2})}else{var t=1===this.accoutTypeStatus?"typeForm":"typeForm2";this.$refs[t].validate(function(t){if(!t)return!1;var a=1===e.accoutTypeStatus?e.typeForm:e.typeForm2;a.type=e.accoutTypeStatus,e.postType(a)})}},postType:function(e){var t=this;e.id=this.rowData.id,Object(d.u)(e).then(function(e){t.layer_accountType=!1,t.$message.success("编辑账号类型成功"),t.searchParam()}).catch(function(e){})},clearTypeValidate:function(){this.$refs.typeForm.resetFields(),this.$refs.typeForm2.resetFields()},allocateHouse:function(){var e=this,t=[];this.cityData.map(function(e){e.childrens.map(function(a){a.childrens.map(function(i){i.checked&&t.push({cityId:e.id,areaId:a.id,zoneId:i.id})})})});var a={depId:this.nowOrgObj.id,depPerms:t};Object(d.a)(a).then(function(t){e.layer_house=!1,e.$message.success("房源分配成功")}).catch(function(e){})},checkChange:function(e,t){t instanceof Array&&function t(a){a.map(function(a){if(a.checked=e,!(a.childrens instanceof Array&&a.childrens.length>0))return!1;t(a.childrens)})}(t),this.dataFomart()}}}},iIwu:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,".checkblue{color:#409eff}.layout-container .pageMain{padding:0 20px}.asideBox{border:1px solid #ddd;height:100%}.filter-item{margin-left:10px}.pageMain{padding:0 20px}.topBanner{border:1px solid #ccc;padding:10px}.topBanner .blue{color:#409eff;font-weight:700;line-height:28px}.model-search{padding:10px 0}.underline{text-decoration:underline;cursor:pointer}.colorRed{color:#f56c6c}.colorInfo{color:#909399}.grid-content{width:100%;height:360px;border:1px solid #ccc}.grid-content .topTitle{width:100%;height:30px;line-height:30px;text-align:center;border-bottom:1px solid #ccc;background:#eee}.grid-content .contentNav{width:100%;height:330px;overflow:auto}.grid-content .contentNav li{width:100%;height:30px;line-height:30px;padding-left:10px}.grid-content .contentNav .current{background:#eee}",""])},m6sj:function(e,t,a){var i=a("iIwu");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("387b2754",i,!0)},mClu:function(e,t,a){var i=a("kM2E");i(i.S+i.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})},phvD:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout-container"},[a("el-container",[a("el-aside",{staticClass:"asideBox",style:e.treeHeight,attrs:{width:"240px"}},[a("el-tree",{ref:"trees",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","highlight-current":!0,"expand-on-click-node":!1,indent:8,"default-expanded-keys":[e.nowOrgObj.id]},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),a("el-main",{staticClass:"pageMain"},[a("el-row",{staticClass:"topBanner"},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"blue"},[e._v("当前选择："+e._s(e.nowOrgObj.depName))]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1!==e.nowOrgObj.id,expression:"nowOrgObj.id !== 1"}],staticClass:"right filter-item",attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:e.delOrg}},[e._v("删除")]),e._v(" "),a("el-button",{staticClass:"right filter-item",attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:e.editOrg}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1!==e.nowOrgObj.id,expression:"nowOrgObj.id !== 1"}],staticClass:"right filter-item",attrs:{type:"primary",size:"mini",icon:"el-icon-menu"},on:{click:e.assignHouse}},[e._v("房源分配")]),e._v(" "),a("el-button",{staticClass:"right filter-item",attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus-outline"},on:{click:e.addOrg}},[e._v("添加旗下部门")])],1)],1),e._v(" "),a("div",{staticClass:"model-search clearfix"},[a("el-input",{staticStyle:{width:"140px"},attrs:{size:"small",placeholder:"姓名/手机号码"},nativeOn:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchParam(t)}},model:{value:e.formData.nameOrMobile,callback:function(t){e.$set(e.formData,"nameOrMobile",t)},expression:"formData.nameOrMobile"}}),e._v(" "),a("el-select",{staticStyle:{width:"140px"},attrs:{size:"small",placeholder:"在职情况"},model:{value:e.formData.isDelete,callback:function(t){e.$set(e.formData,"isDelete",t)},expression:"formData.isDelete"}},e._l(e.IncumbencyList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-select",{staticStyle:{width:"140px"},attrs:{size:"small",placeholder:"请选择类型"},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},e._l(e.InserviceList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},nativeOn:{click:function(t){e.searchParam(t)}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{plain:"",size:"small",icon:"el-icon-remove-outline"},nativeOn:{click:function(t){e.clearForm(t)}}},[e._v("清空")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-upload"},nativeOn:{click:function(t){e.exportExcel(t)}}},[e._v("导出")]),e._v(" "),a("el-button",{staticClass:"right",attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},nativeOn:{click:function(t){e.handleApply(t)}}},[e._v("新增账号")])],1),e._v(" "),a("GridUnit",{ref:"refGridUnit",attrs:{columns:e.colModels,url:e.url,listField:"data.result",autoLoad:!1,dataMethod:e.method,formOptions:e.formData,height:e.tableHeight},scopedSlots:e._u([{key:"handle",fn:function(t){return[10!==t.row.role?a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){e.editAccount(t.row)}}},[e._v("\n              编辑\n            ")]),e._v(" "),a("el-button",{attrs:{type:"warning",icon:"el-icon-refresh",size:"small"},on:{click:function(a){e.resetPsd(t.row)}}},[e._v("\n              密码重置\n            ")]),e._v(" "),1==t.row.isDelete?a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.backAccount(t.row)}}},[e._v("\n              复职\n            ")]):a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.leaveAccount(t.row)}}},[e._v("\n              离职\n            ")])],1):e._e()]}},{key:"roleTmp",fn:function(t){return[e._v("\n          "+e._s(t.row.roleName)+"\n        ")]}},{key:"accountType",fn:function(t){return[1==t.row.type?a("el-tag",[e._v("正式")]):0==t.row.type?a("div",{staticClass:"underline colorRed",on:{click:function(a){e.changeAccountType(t.row)}}},[e._v("试用中")]):a("div",{staticClass:"underline colorInfo",on:{click:function(a){e.changeAccountType(t.row)}}},[e._v("已失效")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"dialog-info"},[a("el-dialog",{attrs:{title:e.isEditOrg?"编辑部门":"添加部门",visible:e.layer_addOrg,width:"500px","close-on-click-modal":!1},on:{close:e.layerClose,"update:visible":function(t){e.layer_addOrg=t}}},[a("el-form",{ref:"orgForm",staticStyle:{"margin-left":"20px"},attrs:{size:"small",model:e.orgForm,rules:e.rules,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"部门名称",prop:"depName"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.orgForm.depName,callback:function(t){e.$set(e.orgForm,"depName",t)},expression:"orgForm.depName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上级部门"}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!e.isEditOrg,expression:"!isEditOrg"}],attrs:{disabled:!0},model:{value:e.superiorName,callback:function(t){e.superiorName=t},expression:"superiorName"}}),e._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.isEditOrg,expression:"isEditOrg"}],attrs:{disabled:e.isEditOrg&&0==e.nowOrgObj.parentId},model:{value:e.superiorName,callback:function(t){e.superiorName=t},expression:"superiorName"}},[a("el-tree",{ref:"overlayTree",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","highlight-current":!0,"expand-on-click-node":!1,"default-expanded-keys":[e.parentOrg.id]},on:{"node-click":e.editNodeclick}}),e._v(" "),a("el-option",{staticStyle:{display:"none"},attrs:{value:""}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.layer_addOrg=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitOrg}},[e._v("确定")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-info"},[a("el-dialog",{attrs:{title:"房源分配管理",visible:e.layer_house,width:"700px","close-on-click-modal":!1},on:{"update:visible":function(t){e.layer_house=t},close:e.houseClose}},[a("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("\n        给部门 "),a("span",{staticClass:"colorRed"},[e._v(e._s(e.nowOrgObj.depName))]),e._v(" 分配房源\n      ")]),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"topTitle"},[e._v("\n              城市\n            ")]),e._v(" "),a("ul",{staticClass:"contentNav"},e._l(e.cityData,function(t,i){return a("li",{key:i,class:{current:e.cityIndex===i},on:{click:function(t){e.cityIndex=i}}},[a("el-checkbox",{attrs:{indeterminate:t.indeterminate},on:{change:function(a){e.checkChange(t.checked,t.childrens)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}}),e._v(" "),a("span",{class:{checkblue:t.checked}},[e._v(e._s(t.name))])],1)}))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"topTitle"},[e._v("\n              区域\n            ")]),e._v(" "),a("ul",{staticClass:"contentNav"},e._l(e.cityData.length>0?e.cityData[e.cityIndex].childrens:[],function(t,i){return a("li",{key:i,class:{current:e.areaIndex===i},on:{click:function(t){e.areaIndex=i}}},[a("el-checkbox",{attrs:{indeterminate:t.indeterminate},on:{change:function(a){e.checkChange(t.checked,t.childrens)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}}),e._v(" "),a("span",{class:{checkblue:t.checked}},[e._v(e._s(t.name))])],1)}))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"topTitle"},[e._v("\n              板块/商圈\n            ")]),e._v(" "),a("ul",{staticClass:"contentNav"},e._l(e.cityData.length>0?e.cityData[e.cityIndex].childrens[e.areaIndex].childrens:[],function(t,i){return a("li",{key:i},[a("el-checkbox",{on:{change:function(a){e.checkChange(t.checked,t.childrens)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}}),e._v(" "),a("span",{class:{checkblue:t.checked}},[e._v(e._s(t.name))])],1)}))])])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.layer_house=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.allocateHouse}},[e._v("确定")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-info"},[a("el-dialog",{attrs:{title:e.isEditAccount?"编辑账号":"新增账号",visible:e.layer_account,width:"800px","close-on-click-modal":!1},on:{close:e.closeAccount,"update:visible":function(t){e.layer_account=t}}},[a("el-form",{ref:"accountForm",attrs:{size:"small",model:e.accountForm,rules:e.rules,"label-position":"right","label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[a("el-input",{model:{value:e.accountForm.mobile,callback:function(t){e.$set(e.accountForm,"mobile",t)},expression:"accountForm.mobile"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{maxlength:"10",disabled:e.editAdd},model:{value:e.accountForm.name,callback:function(t){e.$set(e.accountForm,"name",t)},expression:"accountForm.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{model:{value:e.accountForm.sex,callback:function(t){e.$set(e.accountForm,"sex",t)},expression:"accountForm.sex"}},e._l(e.genderOpts,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属部门",prop:"depName"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.accountForm.depName,callback:function(t){e.$set(e.accountForm,"depName",t)},expression:"accountForm.depName"}},[a("el-tree",{ref:"overlayTree",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","highlight-current":!0,"expand-on-click-node":!1,"default-expanded-keys":[e.nowOrgObj.id]},on:{"node-click":e.overlayNodeClick}}),e._v(" "),a("el-option",{staticStyle:{display:"none"},attrs:{value:""}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"权限角色",prop:"role"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.accountForm.role,callback:function(t){e.$set(e.accountForm,"role",t)},expression:"accountForm.role"}},e._l(e.roleOpts,function(e){return a("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机编码",prop:"imei"}},[a("el-input",{model:{value:e.accountForm.imei,callback:function(t){e.$set(e.accountForm,"imei",t)},expression:"accountForm.imei"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[e.isTry?a("el-form-item",{attrs:{label:"失效时间",prop:"gmtExpire"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","default-time":"23:59:59","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,placeholder:"失效时间"},model:{value:e.accountForm.gmtExpire,callback:function(t){e.$set(e.accountForm,"gmtExpire",t)},expression:"accountForm.gmtExpire"}})],1):a("el-form-item",{attrs:{label:"入职时间",prop:"gmtHire"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","default-time":"00:00:00","value-format":"yyyy-MM-dd HH:mm:ss",disabled:e.isEditAccount,placeholder:"选择入职日期"},model:{value:e.accountForm.gmtHire,callback:function(t){e.$set(e.accountForm,"gmtHire",t)},expression:"accountForm.gmtHire"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证号码",prop:"idNo"}},[a("el-input",{attrs:{disabled:e.editAdd},model:{value:e.accountForm.idNo,callback:function(t){e.$set(e.accountForm,"idNo",t)},expression:"accountForm.idNo"}})],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEditAccount,expression:"!isEditAccount"}],staticStyle:{"padding-left":"27px"}},[e._v("温馨提示：默认密码为123456，请提醒用户首次登陆后立即更改密码")]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.layer_account=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.submitForm("accountForm")}}},[e._v("确定")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-info"},[a("el-dialog",{attrs:{title:"账号类型",visible:e.layer_accountType,width:"500px","close-on-click-modal":!1},on:{close:e.close_accountType,"update:visible":function(t){e.layer_accountType=t}}},[a("div",[e._v("更改账号类型")]),e._v(" "),a("div",{staticStyle:{"line-height":"50px"}},[a("el-row",[a("el-radio-group",{staticStyle:{width:"100%"},on:{change:e.clearTypeValidate},model:{value:e.accoutTypeStatus,callback:function(t){e.accoutTypeStatus=t},expression:"accoutTypeStatus"}},[a("el-col",{attrs:{span:8}},[a("el-radio",{attrs:{label:1}},[e._v("设为正式账号")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-radio",{attrs:{label:0}},[e._v("设为试用账号")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-radio",{attrs:{label:2}},[e._v("设为失效账号")])],1)],1)],1)],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:1==e.accoutTypeStatus,expression:"accoutTypeStatus == 1"}],ref:"typeForm",attrs:{size:"small",model:e.typeForm,rules:e.rules,"label-position":"right","label-width":"120px"}},[a("el-form-item",{attrs:{label:"指定手机号码",prop:"mobile"}},[a("el-input",{model:{value:e.typeForm.mobile,callback:function(t){e.$set(e.typeForm,"mobile",t)},expression:"typeForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机编码",prop:"imei"}},[a("el-input",{model:{value:e.typeForm.imei,callback:function(t){e.$set(e.typeForm,"imei",t)},expression:"typeForm.imei"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"入职时间",prop:"gmtHire"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","default-time":"00:00:00","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择入职时间"},model:{value:e.typeForm.gmtHire,callback:function(t){e.$set(e.typeForm,"gmtHire",t)},expression:"typeForm.gmtHire"}})],1)],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:0==e.accoutTypeStatus,expression:"accoutTypeStatus == 0"}],ref:"typeForm2",attrs:{size:"small",model:e.typeForm2,rules:e.rules,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"失效时间",prop:"gmtExpire"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","default-time":"23:59:59","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,placeholder:"选择失效日期"},model:{value:e.typeForm2.gmtExpire,callback:function(t){e.$set(e.typeForm2,"gmtExpire",t)},expression:"typeForm2.gmtExpire"}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.accoutTypeStatus,expression:"accoutTypeStatus == 2"}],staticClass:"colorRed"},[e._v("失效后，账号将无法登陆")]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.layer_accountType=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.accountTypeSub}},[e._v("确定")])],1)],1)],1),e._v(" "),a("Incumbency",{ref:"incumbency",on:{searchStart:e.searchParam}})],1)},staticRenderFns:[]}},qSzc:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,".model-table{border:1px solid #e6ebf5}.model-pagenation{padding:10px 0;text-align:right}.table-expand{font-size:0}.table-expand .el-form-item__content,.table-expand .el-form-item__label{font-size:12px}.table-expand label{color:#99a9bf}.table-expand .el-form-item{margin-right:0;margin-bottom:0;width:33%}",""])},xgMI:function(e,t,a){var i=a("VU/8")(a("hfW0"),a("phvD"),function(e){a("m6sj")},null,null);e.exports=i.exports}});