webpackJsonp([11],{D7CT:function(e,t,i){var n=i("VU/8")(i("kKT2"),i("fjIz"),function(e){i("j0V5")},"data-v-1e055760",null);e.exports=n.exports},QCD6:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,".grid-content[data-v-1e055760]{width:100%;height:360px;border:1px solid #ccc}.contentNav[data-v-1e055760]{width:100%;height:330px;overflow:auto}.contentNav li[data-v-1e055760]{width:100%;height:30px;line-height:30px;padding-left:10px}.contentNav .current[data-v-1e055760]{background:#eee}.right[data-v-1e055760]{float:right}.current[data-v-1e055760]{background:#eee}.checkblue[data-v-1e055760]{color:#409eff}.topTitle[data-v-1e055760]{width:100%;height:30px;line-height:30px;text-align:center;border-bottom:1px solid #ccc;background:#eee}",""])},fjIz:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("el-dialog",{attrs:{"before-close":e.cancelRole,title:e.editOradd?"编辑角色":"新建角色",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("div",{staticClass:"text-box"},[i("el-form",{ref:"form",attrs:{inline:!0,rules:e.rules,model:e.form,"label-width":"80px",size:"small"}},[i("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[i("el-input",{attrs:{maxlength:10,placeholder:"请输入"},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),e._v(" "),i("el-form-item",{staticClass:"right"},[i("el-checkbox",{model:{value:e.form.backLogin,callback:function(t){e.$set(e.form,"backLogin",t)},expression:"form.backLogin"}},[e._v("允许登陆飞虎队后台")])],1)],1)],1),e._v(" "),i("div",{staticClass:"checkout-box"},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:8}},[i("div",{staticClass:"grid-content"},[i("div",{staticClass:"topTitle"},[e._v("\n             一级菜单\n           ")]),e._v(" "),i("ul",{staticClass:"contentNav"},e._l(e.allList,function(t,n){return i("li",{key:n,on:{click:function(t){e.openCLick(n)}}},[i("el-checkbox",{attrs:{indeterminate:t.isIndeterminat},on:{change:function(i){e.checkChange(t.isFlag,t.children)}},model:{value:t.isFlag,callback:function(i){e.$set(t,"isFlag",i)},expression:"item.isFlag"}}),e._v(" "),i("span",{class:{checkblue:!0===t.isFlag}},[e._v(e._s(t.menuName))])],1)}))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("div",{staticClass:"grid-content"},[i("div",{staticClass:"topTitle"},[e._v("\n             二级菜单\n           ")]),e._v(" "),i("ul",{staticClass:"contentNav"},e._l(e.allList.length>0?e.allList[e.operaIndex].children:[],function(t,n){return i("li",{key:n,on:{click:function(t){e.actionIndex=n}}},[i("el-checkbox",{attrs:{indeterminate:t.isIndeterminat},on:{change:function(i){e.checkChange(t.isFlag,t.children)}},model:{value:t.isFlag,callback:function(i){e.$set(t,"isFlag",i)},expression:"item.isFlag"}}),e._v(" "),i("span",{class:{checkblue:!0===t.isFlag}},[e._v(e._s(t.menuName))])],1)}))])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("div",{staticClass:"grid-content"},[i("div",{staticClass:"topTitle"},[e._v("\n             操作按钮\n           ")]),e._v(" "),i("ul",{staticClass:"contentNav"},e._l(e.allList.length>0?e.allList[e.operaIndex].children[e.actionIndex].children:[],function(t,n){return i("li",{key:n},[i("el-checkbox",{on:{change:function(i){e.checkChange(t.isFlag,t.children)}},model:{value:t.isFlag,callback:function(i){e.$set(t,"isFlag",i)},expression:"item.isFlag"}}),e._v(" "),i("span",{class:{checkblue:!0===t.isFlag}},[e._v(e._s(t.menuName))])],1)}))])])],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancelRole}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.saveSub}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]}},j0V5:function(e,t,i){var n=i("QCD6");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("239e5282",n,!0)},kKT2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("+MD4"),a=i("0xDb");t.default={data:function(){return{dialogFormVisible:!1,editOradd:null,allList:[],allListNow:[],operaIndex:0,actionIndex:0,rules:{roleName:[{min:0,max:10,message:"长度在 10 个字符以内",trigger:"blur"}]},form:{roleId:"",roleName:"",menuIds:[],backLogin:0}}},mounted:function(){},methods:{openCLick:function(e){this.operaIndex=e,this.actionIndex=0},checkChange:function(e,t){t instanceof Array&&function t(i){i.map(function(i){if(i.isFlag=e,!(i.children instanceof Array&&i.children.length>0))return!1;t(i.children)})}(t),this.dataFomart()},dataFomart:function(){var e=this;this.form.menuIds=[],this.allList.map(function(t){var i=[],n=[];t.children.map(function(t){var a=[];t.children.map(function(t){t.isFlag&&(a.push(t),e.form.menuIds.push(t.menuId))}),a.length===t.children.length?0===t.children.length&&!0===t.isFlag?(i.push(t),e.form.menuIds.push(t.menuId)):0!==t.children.length&&(t.isFlag=!0,t.isIndeterminat=!1,e.form.menuIds.push(t.menuId),i.push(t)):(t.isFlag=!1,t.isIndeterminat=a.length>0,t.isIndeterminat&&(n.push(t),e.form.menuIds.push(t.menuId)))}),i.length===t.children.length&&t.children.length>0?(t.isFlag=!0,e.form.menuIds.push(t.menuId),t.isIndeterminat=!1):(t.isFlag=!1,t.isIndeterminat=i.length>0||n.length>0,(n.length>0||i.length>0)&&e.form.menuIds.push(t.menuId))})},saveSub:function(){var e=this;if(!0===this.form.backLogin?this.form.backLogin=1:this.form.backLogin=0,this.dataFomart(),""===this.form.roleName)return this.$message({message:"没做任何操作，请确认数据",type:"error"}),!1;Object(n.q)(this.form).then(function(t){Object(a.c)(e.form),e.allListNow=[],e.editOradd=null,e.dialogFormVisible=!1,e.$emit("editOver"),e.$message({message:"保存成功",type:"success"})})},cancelRole:function(){Object(a.c)(this.form),this.allListNow=[],this.editOradd=null,this.dialogFormVisible=!1},getList:function(){var e=this,t={roleId:null!==this.editOradd&&void 0!==this.editOradd?this.editOradd.roleId:-1};Object(n.r)(t).then(function(t){e.allList=t.data})},open:function(e){this.operaIndex=0,this.actionIndex=0,this.dialogFormVisible=!0,e&&(this.editOradd=e,this.form.roleId=e.roleId,this.form.roleName=e.roleName,1===e.backLogin?this.form.backLogin=!0:this.form.backLogin=!1),this.getList()}}}}});