webpackJsonp([3,11],{"3wxA":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("D7CT"),a=n.n(i),l=n("+MD4");t.default={components:{operateRole:a.a},data:function(){return{roleList:[]}},mounted:function(){this.getList()},methods:{getList:function(){var e=this;Object(l.o)().then(function(t){e.roleList=t.data})},handleEdit:function(e){this.$refs.operateRole.open(e)},handleDelete:function(e){var t=this,n={roleId:e.roleId};Object(l.f)(n).then(function(e){t.getList(),t.$message({message:"删除成功",type:"success"})})},handClick:function(){this.$refs.operateRole.open()}}}},D7CT:function(e,t,n){var i=n("VU/8")(n("kKT2"),n("fjIz"),function(e){n("j0V5")},"data-v-1e055760",null);e.exports=i.exports},O9o3:function(e,t,n){var i=n("VU/8")(n("3wxA"),n("vTVK"),function(e){n("Rbsx")},"data-v-e7ebe92e",null);e.exports=i.exports},QCD6:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,".grid-content[data-v-1e055760]{width:100%;height:360px;border:1px solid #ccc}.contentNav[data-v-1e055760]{width:100%;height:330px;overflow:auto}.contentNav li[data-v-1e055760]{width:100%;height:30px;line-height:30px;padding-left:10px}.contentNav .current[data-v-1e055760]{background:#eee}.right[data-v-1e055760]{float:right}.current[data-v-1e055760]{background:#eee}.checkblue[data-v-1e055760]{color:#409eff}.topTitle[data-v-1e055760]{width:100%;height:30px;line-height:30px;text-align:center;border-bottom:1px solid #ccc;background:#eee}",""])},Rbsx:function(e,t,n){var i=n("kfJv");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("558a87bf",i,!0)},fjIz:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("el-dialog",{attrs:{"before-close":e.cancelRole,title:e.editOradd?"编辑角色":"新建角色",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("div",{staticClass:"text-box"},[n("el-form",{ref:"form",attrs:{inline:!0,rules:e.rules,model:e.form,"label-width":"80px",size:"small"}},[n("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[n("el-input",{attrs:{maxlength:10,placeholder:"请输入"},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),e._v(" "),n("el-form-item",{staticClass:"right"},[n("el-checkbox",{model:{value:e.form.backLogin,callback:function(t){e.$set(e.form,"backLogin",t)},expression:"form.backLogin"}},[e._v("允许登陆飞虎队后台")])],1)],1)],1),e._v(" "),n("div",{staticClass:"checkout-box"},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:8}},[n("div",{staticClass:"grid-content"},[n("div",{staticClass:"topTitle"},[e._v("\n             一级菜单\n           ")]),e._v(" "),n("ul",{staticClass:"contentNav"},e._l(e.allList,function(t,i){return n("li",{key:i,on:{click:function(t){e.openCLick(i)}}},[n("el-checkbox",{attrs:{indeterminate:t.isIndeterminat},on:{change:function(n){e.checkChange(t.isFlag,t.children)}},model:{value:t.isFlag,callback:function(n){e.$set(t,"isFlag",n)},expression:"item.isFlag"}}),e._v(" "),n("span",{class:{checkblue:!0===t.isFlag}},[e._v(e._s(t.menuName))])],1)}))])]),e._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"grid-content"},[n("div",{staticClass:"topTitle"},[e._v("\n             二级菜单\n           ")]),e._v(" "),n("ul",{staticClass:"contentNav"},e._l(e.allList.length>0?e.allList[e.operaIndex].children:[],function(t,i){return n("li",{key:i,on:{click:function(t){e.actionIndex=i}}},[n("el-checkbox",{attrs:{indeterminate:t.isIndeterminat},on:{change:function(n){e.checkChange(t.isFlag,t.children)}},model:{value:t.isFlag,callback:function(n){e.$set(t,"isFlag",n)},expression:"item.isFlag"}}),e._v(" "),n("span",{class:{checkblue:!0===t.isFlag}},[e._v(e._s(t.menuName))])],1)}))])]),e._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"grid-content"},[n("div",{staticClass:"topTitle"},[e._v("\n             操作按钮\n           ")]),e._v(" "),n("ul",{staticClass:"contentNav"},e._l(e.allList.length>0?e.allList[e.operaIndex].children[e.actionIndex].children:[],function(t,i){return n("li",{key:i},[n("el-checkbox",{on:{change:function(n){e.checkChange(t.isFlag,t.children)}},model:{value:t.isFlag,callback:function(n){e.$set(t,"isFlag",n)},expression:"item.isFlag"}}),e._v(" "),n("span",{class:{checkblue:!0===t.isFlag}},[e._v(e._s(t.menuName))])],1)}))])])],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.cancelRole}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.saveSub}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]}},j0V5:function(e,t,n){var i=n("QCD6");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("239e5282",i,!0)},kKT2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("+MD4"),a=n("0xDb");t.default={data:function(){return{dialogFormVisible:!1,editOradd:null,allList:[],allListNow:[],operaIndex:0,actionIndex:0,rules:{roleName:[{min:0,max:10,message:"长度在 10 个字符以内",trigger:"blur"}]},form:{roleId:"",roleName:"",menuIds:[],backLogin:0}}},mounted:function(){},methods:{openCLick:function(e){this.operaIndex=e,this.actionIndex=0},checkChange:function(e,t){t instanceof Array&&function t(n){n.map(function(n){if(n.isFlag=e,!(n.children instanceof Array&&n.children.length>0))return!1;t(n.children)})}(t),this.dataFomart()},dataFomart:function(){var e=this;this.form.menuIds=[],this.allList.map(function(t){var n=[],i=[];t.children.map(function(t){var a=[];t.children.map(function(t){t.isFlag&&(a.push(t),e.form.menuIds.push(t.menuId))}),a.length===t.children.length?0===t.children.length&&!0===t.isFlag?(n.push(t),e.form.menuIds.push(t.menuId)):0!==t.children.length&&(t.isFlag=!0,t.isIndeterminat=!1,e.form.menuIds.push(t.menuId),n.push(t)):(t.isFlag=!1,t.isIndeterminat=a.length>0,t.isIndeterminat&&(i.push(t),e.form.menuIds.push(t.menuId)))}),n.length===t.children.length&&t.children.length>0?(t.isFlag=!0,e.form.menuIds.push(t.menuId),t.isIndeterminat=!1):(t.isFlag=!1,t.isIndeterminat=n.length>0||i.length>0,(i.length>0||n.length>0)&&e.form.menuIds.push(t.menuId))})},saveSub:function(){var e=this;if(!0===this.form.backLogin?this.form.backLogin=1:this.form.backLogin=0,this.dataFomart(),""===this.form.roleName)return this.$message({message:"没做任何操作，请确认数据",type:"error"}),!1;Object(i.q)(this.form).then(function(t){Object(a.c)(e.form),e.allListNow=[],e.editOradd=null,e.dialogFormVisible=!1,e.$emit("editOver"),e.$message({message:"保存成功",type:"success"})})},cancelRole:function(){Object(a.c)(this.form),this.allListNow=[],this.editOradd=null,this.dialogFormVisible=!1},getList:function(){var e=this,t={roleId:null!==this.editOradd&&void 0!==this.editOradd?this.editOradd.roleId:-1};Object(i.r)(t).then(function(t){e.allList=t.data})},open:function(e){this.operaIndex=0,this.actionIndex=0,this.dialogFormVisible=!0,e&&(this.editOradd=e,this.form.roleId=e.roleId,this.form.roleName=e.roleName,1===e.backLogin?this.form.backLogin=!0:this.form.backLogin=!1),this.getList()}}}},kfJv:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,".container[data-v-e7ebe92e]{padding:20px}.add[data-v-e7ebe92e]{float:right}.table-box[data-v-e7ebe92e]{border:1px solid #e5e5e5}.btn-box[data-v-e7ebe92e]{padding-bottom:20px}",""])},vTVK:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"btn-box clearfix"},[n("el-button",{staticClass:"add",attrs:{size:"small",type:"primary"},on:{click:e.handClick}},[e._v("新增")])],1),e._v(" "),n("div",{staticClass:"table-box"},[n("el-table",{staticStyle:{width:"100%"},attrs:{size:"small",data:e.roleList}},[n("el-table-column",{attrs:{type:"index"}}),e._v(" "),n("el-table-column",{attrs:{label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.roleName||"-"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"gmtCreate",label:"创建时间"}}),e._v(" "),n("el-table-column",{attrs:{prop:"gmtModified",label:"修改时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.gmtModified||"-"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"180",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),n("operate-Role",{ref:"operateRole",on:{editOver:e.getList}})],1)},staticRenderFns:[]}}});