webpackJsonp([16],{"+OQD":function(e,t,a){var i=a("LKJ5");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("a89534c2",i,!0)},"/sDd":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container"},[a("el-container",[a("el-aside",{staticClass:"leftSidebar",attrs:{width:"260px"}},[a("el-form",[a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.searchFrom.depName,callback:function(t){e.$set(e.searchFrom,"depName",t)},expression:"searchFrom.depName"}},[a("el-tree",{ref:"overlayTree",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","highlight-current":!0,"expand-on-click-node":!1},on:{getManagerId:e.nowManagerId,"node-click":e.overlayNodeClick}}),e._v(" "),a("el-option",{staticStyle:{display:"none"},attrs:{value:""}})],1)],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{size:"small",placeholder:"业务员姓名/手机号码"},on:{input:e.searchIsDeleteList},model:{value:e.searchFrom.keyword,callback:function(t){e.$set(e.searchFrom,"keyword",t)},expression:"searchFrom.keyword"}})],1),e._v(" "),a("el-form-item",[a("div",{staticClass:"table-box"},[a("scrollLoad",{attrs:{listHeight:e.listHeight,butlerList:e.butlerList,chooseIndex:e.chooseIndex,getBulter:e.getisDeleteList},on:{getManagerId:e.nowManagerId}})],1)])],1)],1),e._v(" "),a("el-main",{staticClass:"pageMain"},[a("div",{staticClass:"showbox"},[e._v("\n        当前工作人数："+e._s(e.countDate)+"\n      ")]),e._v(" "),a("div",{style:e.mapHeight,attrs:{id:"map"}})])],1)],1)},staticRenderFns:[]}},"43mw":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("+MD4"),n=a("Htgu"),o=a("+aT9"),s=a.n(o),r=a("vqyU"),d=a.n(r),l=void 0;t.default={components:{ScrollLoad:d.a},computed:{listHeight:function(){return{height:this.tableHeight-49+"px"}},mapHeight:function(){return{height:this.tableHeight+28+"px"}}},data:function(){return{countDate:"",butlerList:[],pageNumber:0,chooseIndex:"",treeData:[],loading:!0,defaultProps:{children:"child",label:"depName"},IncumbencyList:[{value:null,label:"全部"},{value:0,label:"在职"},{value:1,label:"离职"}],searchFrom:{depId:"",isDelete:"",keyword:"",startTime:"",endTime:"",roomName:"",managerId:""}}},mounted:function(){this.getTree()},created:function(){var e=this,t=document.body.clientHeight-250;this.tableHeight=t>300?t:300,window.onresize=function(){return t=document.body.clientHeight-250,void(e.tableHeight=t>300?t:300)}},methods:{nowManagerId:function(e,t){if(this.searchFrom.managerId=e.id,this.chooseIndex=t,""!==e.data.location){l.setZoomAndCenter(14,e.data.location.split(","));var a=new s.a.Marker({map:l,icon:new s.a.Icon({image:!0===e.status?"//webapi.amap.com/theme/v1.2/m3.png":"//webapi.amap.com/theme/v1.2/m1.png",imageSize:new s.a.Size(24,24)}),offset:new s.a.Pixel(-26,-13),position:e.data.location.split(",")});a.info=new s.a.InfoWindow({content:"<div class=\"content-amap\">\n                       <div class='info'>"+e.name+"</div>\n                       <div class='info'>工作状态："+(!0===e.status?"工作中":"休息")+"</div>\n                       <div class='info'>时间："+e.data.locatetime+"</div>\n                      </div>",offset:new s.a.Pixel(0,0)}),a.info.open(l,e.data.location.split(",")),this.addClickHandler(e,a)}},addClickHandler:function(e,t){t.on("mouseover",function(e){e.target.info.open(l,e.target.getPosition())})},init:function(){var e=this;l=new s.a.Map("map",{resizeEnable:!0,zoom:12}),this.butlerList.map(function(t){if(""!==t.data.location){var a=new s.a.Marker({map:l,icon:new s.a.Icon({image:!0===t.status?"//webapi.amap.com/theme/v1.2/m3.png":"//webapi.amap.com/theme/v1.2/m1.png",imageSize:new s.a.Size(24,24)}),offset:new s.a.Pixel(-26,-13),position:t.data.location.split(",")});a.info=new s.a.InfoWindow({content:"<div class=\"content-amap\">\n                       <div class='info'>"+t.name+"</div>\n                       <div class='info'>工作状态："+(!0===t.status?"工作中":"休息")+"</div>\n                       <div class='info'>时间："+t.data.locatetime+"</div>\n                      </div>",offset:new s.a.Pixel(0,0)}),e.addClickHandler(t,a)}}),l.plugin(["AMap.ToolBar","AMap.MapType"],function(){var e={offset:new s.a.Pixel(100,10),position:"RT",ruler:!0,noIpLocate:!0,locate:!0,liteStyle:!1,direction:!0,autoPosition:!0,locationMarker:s.a.Marker({map:l}),useNative:!1};l.addControl(new s.a.ToolBar(e)),l.addControl(new s.a.MapType({showTraffic:!1,showRoad:!1}))})},getTree:function(e,t){var a=this;Object(i.k)().then(function(t){t.data&&t.data instanceof Array&&(a.treeData=t.data,a.searchFrom.depId=e||a.treeData[0].id,a.searchFrom.depName=a.treeData[0].depName,a.getworkCount(a.searchFrom.depId),a.$nextTick(function(){a.getisDeleteList()}))}).catch(function(e){})},getworkCount:function(e){var t=this;Object(n.f)({depId:e}).then(function(e){t.countDate=e.data})},overlayNodeClick:function(e,t){this.searchFrom.depName=t.data.depName,this.searchFrom.depId=t.data.id,this.getworkCount(t.data.id),this.pageNumber=0,this.getisDeleteList(),this.butlerList=[]},searchbulter:function(){this.pageNumber=0,this.getisDeleteList()},searchIsDeleteList:function(){this.butlerList=[],this.pageNumber=0,this.getisDeleteList()},getisDeleteList:function(){var e=this,t={depId:this.searchFrom.depId,keyword:this.searchFrom.keyword,pageSize:20,pageNo:++this.pageNumber};this.chooseIndex="",Object(n.e)(t).then(function(t){t.data.result&&(e.butlerList=e.butlerList.concat(t.data.result),e.init(),e.$nextTick(function(t){e.loading=!1}))})}}}},"6PD0":function(e,t,a){var i=a("VU/8")(a("43mw"),a("/sDd"),function(e){a("+OQD")},"data-v-5140db6a",null);e.exports=i.exports},LKJ5:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,".pageMain[data-v-5140db6a]{margin:-20px 0;position:relative}.showbox[data-v-5140db6a]{position:absolute;width:160px;top:40px;background:#fff;height:30px;z-index:10;padding:0 10px;font-size:12px;border-radius:4px;-webkit-box-shadow:1px 1px 4px #123;box-shadow:1px 1px 4px #123;color:#757677;line-height:30px;left:30px}#map[data-v-5140db6a]{padding:0;width:100%;background:#fff}.el-form-item[data-v-5140db6a]{margin-bottom:0}.table-box[data-v-5140db6a]{padding-top:10px}.content-amap[data-v-5140db6a]{background:#123}",""])}});