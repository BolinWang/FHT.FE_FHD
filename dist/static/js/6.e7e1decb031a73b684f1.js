webpackJsonp([6],{XZlg:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,".waves-ripple{position:absolute;border-radius:100%;background-color:rgba(0,0,0,.15);background-clip:padding-box;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);opacity:1}.waves-ripple.z-active{opacity:0;-webkit-transform:scale(2);-ms-transform:scale(2);transform:scale(2);-webkit-transition:opacity 1.2s ease-out,-webkit-transform .6s ease-out;transition:opacity 1.2s ease-out,-webkit-transform .6s ease-out;transition:opacity 1.2s ease-out,transform .6s ease-out;transition:opacity 1.2s ease-out,transform .6s ease-out,-webkit-transform .6s ease-out}",""])},cAgV:function(e,t,a){"use strict";var i=a("woOf"),o=a.n(i),r=(a("ctMr"),{bind:function(e,t){e.addEventListener("click",function(a){var i=o()({},t.value),r=o()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),n=r.ele;if(n){n.style.position="relative",n.style.overflow="hidden";var s=n.getBoundingClientRect(),l=n.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":((l=document.createElement("span")).className="waves-ripple",l.style.height=l.style.width=Math.max(s.width,s.height)+"px",n.appendChild(l)),r.type){case"center":l.style.top=s.height/2-l.offsetHeight/2+"px",l.style.left=s.width/2-l.offsetWidth/2+"px";break;default:l.style.top=a.pageY-s.top-l.offsetHeight/2-document.body.scrollTop+"px",l.style.left=a.pageX-s.left-l.offsetWidth/2-document.body.scrollLeft+"px"}return l.style.backgroundColor=r.color,l.className="waves-ripple z-active",!1}},!1)}}),n=function(e){e.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(n)),r.install=n;t.a=r},ctMr:function(e,t,a){var i=a("XZlg");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("44fae30e",i,!0)},hfW0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),r=a("cAgV"),n=a("U4Ig"),s=a.n(n),l=a("NYxO"),c=a("E4LH"),d=a("0xDb"),u=a("LIsc"),p=a.n(u),m=a("+MD4"),h=[{value:1,label:"城市内勤"},{value:2,label:"城市管家"},{value:3,label:"组长"},{value:4,label:"站长"},{value:5,label:"板块经理"},{value:6,label:"区域经理"},{value:7,label:"城市总"},{value:8,label:"人事"},{value:9,label:"运营"},{value:11,label:"BD"}];t.default={name:"framework",directives:{waves:r.a},components:{GridUnit:s.a,Incumbency:p.a},created:function(){var e=this,t=document.body.clientHeight-230;this.tableHeight=t>300?t:300,window.onresize=function(){return t=document.body.clientHeight-230,void(e.tableHeight=t>300?t:300)},this.defaultAccount=Object(d.b)(this.accountForm),this.getTree();var a={parentsRouter:this.$route.matched[0].path,nowRouter:this.$route.path};this.$store.dispatch("ButtonPowerArray",{paramRoute:a}),this.getroleOptsList(),console.log(this.powerButton)},computed:o()({treeHeight:function(){return{height:this.tableHeight+104+"px"}}},Object(l.b)(["powerButton"])),data:function(){return{editParentId:null,hightOrganList:[],nowheightObj:{},IncumbencyList:[{value:null,label:"全部"},{value:0,label:"在职"},{value:1,label:"离职"}],InserviceList:[{value:0,label:"试用"},{value:1,label:"正式"},{value:2,label:"已失效"},{value:null,label:"全部"}],editAdd:!0,pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()}},rules:{depName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],mobile:[{required:!0,trigger:"blur",validator:function(e,t,a){Object(c.a)(t)?a():a(new Error("请输入正确的手机号"))}}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],role:[{required:!0,message:"请选择权限角色",trigger:"change"}],imei:[{required:!0,message:"请输入手机编码",trigger:"blur"}],gmtExpire:[{required:!0,message:"请选择失效时间",trigger:"change"}],gmtHire:[{required:!0,message:"请选择入职时间",trigger:"blur"}],idNo:[{required:!0,trigger:"blur",validator:function(e,t,a){Object(c.b)(t)?a():a(new Error("请输入正确的身份证号码"))}}]},defaultProps:{children:"child",label:"depName"},treeData:[],cityIndex:0,areaIndex:0,cityData:[],genderOpts:[{value:1,label:"男"},{value:2,label:"女"}],rowData:{},roleOpts:[],formData:{nameOrMobile:"",depId:"",type:null,isDelete:0},nowOrgObj:{depName:"",id:""},parentOrg:{depName:"",id:""},tableHeight:300,layer_addOrg:!1,layer_house:!1,layer_accountType:!1,superiorName:"",orgForm:{depName:""},accountForm:{mobile:"",name:"",sex:1,depId:"",depName:"",role:"",imei:"",type:1,gmtHire:"",idNo:""},isTry:!1,accoutTypeStatus:1,typeForm:{mobile:"",imei:"",gmtHire:""},typeForm2:{gmtExpire:""},defaultAccount:{},isEditOrg:!1,isEditAccount:!1,layer_account:!1,colModels:[{prop:"name",label:"姓名",width:100},{prop:"depName",label:"部门"},{prop:"roleName",label:"权限角色",slotName:"roleTmp",width:100},{prop:"mobile",label:"手机号码",width:100},{prop:"imei",label:"手机编码"},{prop:"type",label:"类型",slotName:"accountType",width:80},{label:"操作",slotName:"handle",width:320},{prop:"gmtCreate",label:"创建时间"}],url:"/user/managerList",method:"managerList"}},filters:{roleStr:function(e){var t="";return h.map(function(a){a.value===e&&(t=a.label)}),t||"未知角色"}},methods:{getroleOptsList:function(){var e=this;Object(m.o)().then(function(t){e.roleOpts=t.data})},exportExcel:function(){var e=null!==this.formData.type?this.formData.type:"",t="https://test-flying-api.mdguanjia.com/back/user/exportExcel?isDelete="+(null!==this.formData.isDelete?this.formData.isDelete:"")+"&type="+e+"&nameOrMobile="+this.formData.nameOrMobile+"&depId="+this.formData.depId,a=document.createElement("a");a.style.display="none",a.href=encodeURI(t),document.body.appendChild(a),a.click(),document.body.removeChild(a)},backAccount:function(e){this.$refs.incumbency.open(e)},leaveAccount:function(e){this.$refs.incumbency.open(e)},getTree:function(e,t){var a=this;Object(m.k)().then(function(i){if(i.data&&i.data instanceof Array){a.treeData=i.data;var o=e||a.treeData[0].id;a.getFirstNode(o),t&&a.$nextTick(function(){t()})}}).catch(function(e){})},dataFomart:function(){this.cityData.map(function(e){var t=[],a=[];e.childrens.map(function(e){var i=[];e.childrens.map(function(e){e.checked&&i.push(e)}),i.length===e.childrens.length?(e.checked=!0,e.indeterminate=!1,t.push(e)):(e.checked=!1,e.indeterminate=i.length>0,e.indeterminate&&a.push(e))}),t.length===e.childrens.length?(e.checked=!0,e.indeterminate=!1):(e.checked=!1,e.indeterminate=t.length>0||a.length>0)})},getFirstNode:function(e){var t=this;this.$nextTick(function(){t.$refs.trees.setCurrentKey(e);var a=t.$refs.trees.getNode(e);t.nowOrgObj=Object(d.b)(a.data),t.parentOrg=a.parent.data instanceof Array?Object(d.b)(a.parent.data[0]):Object(d.b)(a.parent.data),t.formData.depId=t.nowOrgObj.id,t.$nextTick(function(){t.searchParam()})})},handleNodeClick:function(e,t){var a=this;this.nowOrgObj=Object(d.b)(t.data),this.parentOrg=t.parent.data instanceof Array?Object(d.b)(t.parent.data[0]):Object(d.b)(t.parent.data),this.formData.depId=this.nowOrgObj.id,this.formData.nameOrMobile="",this.$nextTick(function(){a.searchParam()})},assignHouse:function(){var e=this,t={depId:this.nowOrgObj.id,parentDepId:this.parentOrg.id||0};Object(m.j)(t).then(function(t){t.data&&t.data instanceof Array?(e.cityData=t.data,e.dataFomart(),e.layer_house=!0):e.$message.error("未查询到可分配的房源")}).catch(function(e){})},houseClose:function(){this.cityIndex=0,this.areaIndex=0},addOrg:function(){this.isEditOrg=!1,this.layer_addOrg=!0,this.superiorName=this.nowOrgObj.depName},editOrg:function(){this.isEditOrg=!0,this.superiorName=this.parentOrg.depName,this.editParentId=this.parentOrg.id,this.orgForm.depName=this.nowOrgObj.depName,this.layer_addOrg=!0},editNodeclick:function(e,t){this.parentOrg.depName=t.data.depName,this.editParentId=t.data.id,this.superiorName=this.parentOrg.depName},submitOrg:function(){var e=this;this.$refs.orgForm.validate(function(t){if(!t)return!1;var a=Object(d.b)(e.orgForm),i=m.b;if(e.isEditOrg)for(a.depId=e.nowOrgObj.id,a.parentId=e.editParentId,i=m.s;a.parentId===a.depId;)return e.$message({message:"请选择除自己之外的其他部门",type:"error"}),!1;else a.parentId=e.nowOrgObj.id;console.log(a),i(a).then(function(t){e.layer_addOrg=!1,e.isEditOrg?(e.$message.success("编辑部门成功"),e.getTree(e.nowOrgObj.id)):e.$confirm("部门创建成功，请为部门分配房源","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){e.getTree(t.data.id,e.assignHouse)}).catch(function(){e.getTree(e.nowOrgObj.id)})}).catch(function(e){})})},delOrg:function(){var e=this;this.$confirm("确定删除部门 ‘"+this.nowOrgObj.depName+"’ 吗? 删除前请先确保部门旗下无员工","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={depId:e.nowOrgObj.id};Object(m.d)(t).then(function(t){e.$message.success("删除部门成功"),e.getTree(e.parentOrg.id)}).catch(function(e){})}).catch(function(){})},layerClose:function(){this.$refs.orgForm.resetFields(),this.orgForm.depName=""},searchParam:function(){this.$refs.refGridUnit.searchHandler()},clearForm:function(){this.formData.nameOrMobile="",this.$refs.refGridUnit.searchHandler()},handleApply:function(){var e=this;this.editAdd=!1,this.layer_account=!0,this.isEditAccount=!1,this.isTry=!1,this.accountForm=Object(d.b)(this.defaultAccount),this.accountForm.depId=this.nowOrgObj.id,this.accountForm.depName=this.nowOrgObj.depName,this.$nextTick(function(){e.$refs.overlayTree.setCurrentKey(e.nowOrgObj.id)})},overlayNodeClick:function(e,t){this.accountForm.depName=t.data.depName,this.accountForm.depId=t.data.id},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=Object(d.b)(t.accountForm),i=m.c;t.isEditAccount&&(i=m.t,t.isTry&&(a.type=0)),delete a.depName,i(a).then(function(e){t.layer_account=!1,t.$message.success((t.isEditAccount?"编辑":"新增")+"账号成功"),t.searchParam()}).catch(function(e){})})},editAccount:function(e){var t=this;for(var a in this.editAdd=!0,this.defaultAccount)this.accountForm[a]=e[a];0===e.type?(this.$set(this.accountForm,"gmtExpire",e.gmtExpire),this.isTry=!0):this.isTry=!1,this.accountForm.id=e.id,this.layer_account=!0,this.isEditAccount=!0,this.$nextTick(function(){t.$refs.overlayTree.setCurrentKey(t.accountForm.depId)})},resetPsd:function(e){var t=this;this.$confirm("<div>确定将账号'"+e.name+'\'的密码重置为 <span style="color: red">123456</span> 吗？',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then(function(){var a={id:e.id,password:"123456"};Object(m.n)(a).then(function(e){t.$message.success("重置密码成功"),t.searchParam()}).catch(function(e){})}).catch(function(){})},delAccount:function(e){var t=this;this.$confirm("确定删除账号'"+e.name+"'吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then(function(){var a={id:e.id};Object(m.e)(a).then(function(e){t.$message.success("删除账号成功"),t.searchParam()}).catch(function(e){})}).catch(function(){})},closeAccount:function(){this.$refs.accountForm.resetFields()},changeAccountType:function(e){this.layer_accountType=!0,this.rowData=e},close_accountType:function(){this.clearTypeValidate()},accountTypeSub:function(){var e=this;if(2===this.accoutTypeStatus){this.postType({type:2})}else{var t=1===this.accoutTypeStatus?"typeForm":"typeForm2";this.$refs[t].validate(function(t){if(!t)return!1;var a=1===e.accoutTypeStatus?e.typeForm:e.typeForm2;a.type=e.accoutTypeStatus,e.postType(a)})}},postType:function(e){var t=this;e.id=this.rowData.id,Object(m.u)(e).then(function(e){t.layer_accountType=!1,t.$message.success("编辑账号类型成功"),t.searchParam()}).catch(function(e){})},clearTypeValidate:function(){this.$refs.typeForm.resetFields(),this.$refs.typeForm2.resetFields()},allocateHouse:function(){var e=this,t=[];this.cityData.map(function(e){e.childrens.map(function(a){a.childrens.map(function(i){i.checked&&t.push({cityId:e.id,areaId:a.id,zoneId:i.id})})})});var a={depId:this.nowOrgObj.id,depPerms:t};Object(m.a)(a).then(function(t){e.layer_house=!1,e.$message.success("房源分配成功")}).catch(function(e){})},checkChange:function(e,t){t instanceof Array&&function t(a){a.map(function(a){if(a.checked=e,!(a.childrens instanceof Array&&a.childrens.length>0))return!1;t(a.childrens)})}(t),this.dataFomart()}}}},iIwu:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,".checkblue{color:#409eff}.fl-right{padding-left:10px;float:right}.layout-container .pageMain{padding:0 20px}.asideBox{border:1px solid #ddd;height:100%}.filter-item{margin-left:10px}.pageMain{padding:0 20px}.topBanner{border:1px solid #ccc;padding:10px}.topBanner .blue{color:#409eff;font-weight:700;line-height:28px}.model-search{padding:10px 0}.underline{text-decoration:underline;cursor:pointer}.colorRed{color:#f56c6c}.colorInfo{color:#909399}.grid-content{width:100%;height:360px;border:1px solid #ccc}.grid-content .topTitle{width:100%;height:30px;line-height:30px;text-align:center;border-bottom:1px solid #ccc;background:#eee}.grid-content .contentNav{width:100%;height:330px;overflow:auto}.grid-content .contentNav li{width:100%;height:30px;line-height:30px;padding-left:10px}.grid-content .contentNav .current{background:#eee}",""])},m6sj:function(e,t,a){var i=a("iIwu");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("387b2754",i,!0)},phvD:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout-container"},[a("el-container",[a("el-aside",{staticClass:"asideBox",style:e.treeHeight,attrs:{width:"240px"}},[a("el-tree",{ref:"trees",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","highlight-current":!0,"expand-on-click-node":!1,indent:8,"default-expanded-keys":[e.nowOrgObj.id]},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),a("el-main",{staticClass:"pageMain"},[a("el-row",{staticClass:"topBanner"},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"blue"},[e._v("当前选择："+e._s(e.nowOrgObj.depName))]),e._v(" "),e.powerButton.delUser?a("el-button",{directives:[{name:"show",rawName:"v-show",value:1!==e.nowOrgObj.id,expression:"nowOrgObj.id !== 1"}],staticClass:"right filter-item",attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:e.delOrg}},[e._v("删除")]):e._e(),e._v(" "),e.powerButton.editDepartment?a("el-button",{staticClass:"right filter-item",attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:e.editOrg}},[e._v("编辑")]):e._e(),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1!==e.nowOrgObj.id,expression:"nowOrgObj.id !== 1"}],staticClass:"right filter-item",attrs:{type:"primary",size:"mini",icon:"el-icon-menu"},on:{click:e.assignHouse}},[e._v("房源分配")]),e._v(" "),e.powerButton.addDepartment?a("el-button",{staticClass:"right filter-item",attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus-outline"},on:{click:e.addOrg}},[e._v("添加旗下部门")]):e._e()],1)],1),e._v(" "),a("div",{staticClass:"model-search clearfix"},[a("el-input",{staticStyle:{width:"140px"},attrs:{size:"small",placeholder:"姓名/手机号码"},nativeOn:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchParam(t)}},model:{value:e.formData.nameOrMobile,callback:function(t){e.$set(e.formData,"nameOrMobile",t)},expression:"formData.nameOrMobile"}}),e._v(" "),a("el-select",{staticStyle:{width:"140px"},attrs:{size:"small",placeholder:"在职情况"},model:{value:e.formData.isDelete,callback:function(t){e.$set(e.formData,"isDelete",t)},expression:"formData.isDelete"}},e._l(e.IncumbencyList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-select",{staticStyle:{width:"140px"},attrs:{size:"small",placeholder:"请选择类型"},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},e._l(e.InserviceList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},nativeOn:{click:function(t){e.searchParam(t)}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{plain:"",size:"small",icon:"el-icon-remove-outline"},nativeOn:{click:function(t){e.clearForm(t)}}},[e._v("清空")]),e._v(" "),e.powerButton.export?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-upload"},nativeOn:{click:function(t){e.exportExcel(t)}}},[e._v("导出")]):e._e(),e._v(" "),e.powerButton.addUser?a("el-button",{staticClass:"right",attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},nativeOn:{click:function(t){e.handleApply(t)}}},[e._v("新增账号")]):e._e()],1),e._v(" "),a("GridUnit",{ref:"refGridUnit",attrs:{columns:e.colModels,url:e.url,listField:"data.result",autoLoad:!1,dataMethod:e.method,formOptions:e.formData,height:e.tableHeight},scopedSlots:e._u([{key:"handle",fn:function(t){return[10!==t.row.role?a("div",[e.powerButton.editUser?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){e.editAccount(t.row)}}},[e._v("\n              编辑\n            ")]):e._e(),e._v(" "),e.powerButton.repwd?a("el-button",{attrs:{type:"warning",icon:"el-icon-refresh",size:"small"},on:{click:function(a){e.resetPsd(t.row)}}},[e._v("\n              密码重置\n            ")]):e._e(),e._v(" "),1===t.row.isDelete&&e.powerButton.blUser?a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.backAccount(t.row)}}},[e._v("\n                复职\n              ")]):e._e(),e._v(" "),1!==t.row.isDelete&&e.powerButton.blUser?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.leaveAccount(t.row)}}},[e._v("\n                离职\n             ")]):e._e()],1):e._e()]}},{key:"roleTmp",fn:function(t){return[e._v("\n          "+e._s(t.row.roleName)+"\n        ")]}},{key:"accountType",fn:function(t){return[1==t.row.type?a("el-tag",[e._v("正式")]):0==t.row.type&&e.powerButton.tryoutUser?a("div",{staticClass:"underline colorRed",on:{click:function(a){e.changeAccountType(t.row)}}},[e._v("试用中")]):a("div",{staticClass:"underline colorInfo",on:{click:function(a){e.changeAccountType(t.row)}}},[e._v("已失效")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"dialog-info"},[a("el-dialog",{attrs:{title:e.isEditOrg?"编辑部门":"添加部门",visible:e.layer_addOrg,width:"500px","close-on-click-modal":!1},on:{close:e.layerClose,"update:visible":function(t){e.layer_addOrg=t}}},[a("el-form",{ref:"orgForm",staticStyle:{"margin-left":"20px"},attrs:{size:"small",model:e.orgForm,rules:e.rules,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"部门名称",prop:"depName"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.orgForm.depName,callback:function(t){e.$set(e.orgForm,"depName",t)},expression:"orgForm.depName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上级部门"}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!e.isEditOrg,expression:"!isEditOrg"}],attrs:{disabled:!0},model:{value:e.superiorName,callback:function(t){e.superiorName=t},expression:"superiorName"}}),e._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.isEditOrg,expression:"isEditOrg"}],attrs:{disabled:e.isEditOrg&&0==e.nowOrgObj.parentId},model:{value:e.superiorName,callback:function(t){e.superiorName=t},expression:"superiorName"}},[a("el-tree",{ref:"overlayTree",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","highlight-current":!0,"expand-on-click-node":!1,"default-expanded-keys":[e.parentOrg.id]},on:{"node-click":e.editNodeclick}}),e._v(" "),a("el-option",{staticStyle:{display:"none"},attrs:{value:""}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.layer_addOrg=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitOrg}},[e._v("确定")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-info"},[a("el-dialog",{attrs:{title:"房源分配管理",visible:e.layer_house,width:"700px","close-on-click-modal":!1},on:{"update:visible":function(t){e.layer_house=t},close:e.houseClose}},[a("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("\n        给部门 "),a("span",{staticClass:"colorRed"},[e._v(e._s(e.nowOrgObj.depName))]),e._v(" 分配房源\n      ")]),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"topTitle"},[e._v("\n              城市\n            ")]),e._v(" "),a("ul",{staticClass:"contentNav"},e._l(e.cityData,function(t,i){return a("li",{key:i,class:{current:e.cityIndex===i},on:{click:function(t){e.cityIndex=i}}},[a("el-checkbox",{attrs:{indeterminate:t.indeterminate},on:{change:function(a){e.checkChange(t.checked,t.childrens)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}}),e._v(" "),a("span",{class:{checkblue:t.checked}},[e._v(e._s(t.name))])],1)}))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"topTitle"},[e._v("\n              区域\n            ")]),e._v(" "),a("ul",{staticClass:"contentNav"},e._l(e.cityData.length>0?e.cityData[e.cityIndex].childrens:[],function(t,i){return a("li",{key:i,class:{current:e.areaIndex===i},on:{click:function(t){e.areaIndex=i}}},[a("el-checkbox",{attrs:{indeterminate:t.indeterminate},on:{change:function(a){e.checkChange(t.checked,t.childrens)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}}),e._v(" "),a("span",{class:{checkblue:t.checked}},[e._v(e._s(t.name))])],1)}))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"topTitle"},[e._v("\n              板块/商圈\n            ")]),e._v(" "),a("ul",{staticClass:"contentNav"},e._l(e.cityData.length>0?e.cityData[e.cityIndex].childrens[e.areaIndex].childrens:[],function(t,i){return a("li",{key:i},[a("el-checkbox",{on:{change:function(a){e.checkChange(t.checked,t.childrens)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}}),e._v(" "),a("span",{class:{checkblue:t.checked}},[e._v(e._s(t.name))])],1)}))])])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.layer_house=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.allocateHouse}},[e._v("确定")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-info"},[a("el-dialog",{attrs:{title:e.isEditAccount?"编辑账号":"新增账号",visible:e.layer_account,width:"800px","close-on-click-modal":!1},on:{close:e.closeAccount,"update:visible":function(t){e.layer_account=t}}},[a("el-form",{ref:"accountForm",attrs:{size:"small",model:e.accountForm,rules:e.rules,"label-position":"right","label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[a("el-input",{model:{value:e.accountForm.mobile,callback:function(t){e.$set(e.accountForm,"mobile",t)},expression:"accountForm.mobile"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{maxlength:"10",disabled:e.editAdd},model:{value:e.accountForm.name,callback:function(t){e.$set(e.accountForm,"name",t)},expression:"accountForm.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{model:{value:e.accountForm.sex,callback:function(t){e.$set(e.accountForm,"sex",t)},expression:"accountForm.sex"}},e._l(e.genderOpts,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属部门",prop:"depName"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.accountForm.depName,callback:function(t){e.$set(e.accountForm,"depName",t)},expression:"accountForm.depName"}},[a("el-tree",{ref:"overlayTree",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","highlight-current":!0,"expand-on-click-node":!1,"default-expanded-keys":[e.nowOrgObj.id]},on:{"node-click":e.overlayNodeClick}}),e._v(" "),a("el-option",{staticStyle:{display:"none"},attrs:{value:""}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"权限角色",prop:"role"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.accountForm.role,callback:function(t){e.$set(e.accountForm,"role",t)},expression:"accountForm.role"}},e._l(e.roleOpts,function(e){return a("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机编码",prop:"imei"}},[a("el-input",{model:{value:e.accountForm.imei,callback:function(t){e.$set(e.accountForm,"imei",t)},expression:"accountForm.imei"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[e.isTry?a("el-form-item",{attrs:{label:"失效时间",prop:"gmtExpire"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","default-time":"23:59:59","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,placeholder:"失效时间"},model:{value:e.accountForm.gmtExpire,callback:function(t){e.$set(e.accountForm,"gmtExpire",t)},expression:"accountForm.gmtExpire"}})],1):a("el-form-item",{attrs:{label:"入职时间",prop:"gmtHire"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","default-time":"00:00:00","value-format":"yyyy-MM-dd HH:mm:ss",disabled:e.isEditAccount,placeholder:"选择入职日期"},model:{value:e.accountForm.gmtHire,callback:function(t){e.$set(e.accountForm,"gmtHire",t)},expression:"accountForm.gmtHire"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证号码",prop:"idNo"}},[a("el-input",{attrs:{disabled:e.editAdd},model:{value:e.accountForm.idNo,callback:function(t){e.$set(e.accountForm,"idNo",t)},expression:"accountForm.idNo"}})],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEditAccount,expression:"!isEditAccount"}],staticStyle:{"padding-left":"27px"}},[e._v("温馨提示：默认密码为123456，请提醒用户首次登陆后立即更改密码")]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.layer_account=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.submitForm("accountForm")}}},[e._v("确定")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-info"},[a("el-dialog",{attrs:{title:"账号类型",visible:e.layer_accountType,width:"500px","close-on-click-modal":!1},on:{close:e.close_accountType,"update:visible":function(t){e.layer_accountType=t}}},[a("div",[e._v("更改账号类型")]),e._v(" "),a("div",{staticStyle:{"line-height":"50px"}},[a("el-row",[a("el-radio-group",{staticStyle:{width:"100%"},on:{change:e.clearTypeValidate},model:{value:e.accoutTypeStatus,callback:function(t){e.accoutTypeStatus=t},expression:"accoutTypeStatus"}},[a("el-col",{attrs:{span:8}},[a("el-radio",{attrs:{label:1}},[e._v("设为正式账号")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-radio",{attrs:{label:0}},[e._v("设为试用账号")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-radio",{attrs:{label:2}},[e._v("设为失效账号")])],1)],1)],1)],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:1==e.accoutTypeStatus,expression:"accoutTypeStatus == 1"}],ref:"typeForm",attrs:{size:"small",model:e.typeForm,rules:e.rules,"label-position":"right","label-width":"120px"}},[a("el-form-item",{attrs:{label:"指定手机号码",prop:"mobile"}},[a("el-input",{model:{value:e.typeForm.mobile,callback:function(t){e.$set(e.typeForm,"mobile",t)},expression:"typeForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机编码",prop:"imei"}},[a("el-input",{model:{value:e.typeForm.imei,callback:function(t){e.$set(e.typeForm,"imei",t)},expression:"typeForm.imei"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"入职时间",prop:"gmtHire"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","default-time":"00:00:00","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择入职时间"},model:{value:e.typeForm.gmtHire,callback:function(t){e.$set(e.typeForm,"gmtHire",t)},expression:"typeForm.gmtHire"}})],1)],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:0==e.accoutTypeStatus,expression:"accoutTypeStatus == 0"}],ref:"typeForm2",attrs:{size:"small",model:e.typeForm2,rules:e.rules,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"失效时间",prop:"gmtExpire"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","default-time":"23:59:59","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,placeholder:"选择失效日期"},model:{value:e.typeForm2.gmtExpire,callback:function(t){e.$set(e.typeForm2,"gmtExpire",t)},expression:"typeForm2.gmtExpire"}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.accoutTypeStatus,expression:"accoutTypeStatus == 2"}],staticClass:"colorRed"},[e._v("失效后，账号将无法登陆")]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.layer_accountType=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.accountTypeSub}},[e._v("确定")])],1)],1)],1),e._v(" "),a("Incumbency",{ref:"incumbency",on:{searchStart:e.searchParam}})],1)},staticRenderFns:[]}},xgMI:function(e,t,a){var i=a("VU/8")(a("hfW0"),a("phvD"),function(e){a("m6sj")},null,null);e.exports=i.exports}});